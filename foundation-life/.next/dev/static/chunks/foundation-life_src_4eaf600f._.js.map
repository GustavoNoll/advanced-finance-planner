{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst url = process.env.NEXT_PUBLIC_LIFE_SUPABASE_URL\nconst anonKey = process.env.NEXT_PUBLIC_LIFE_SUPABASE_ANON_KEY\n\nif (!url || !anonKey) {\n  console.warn('⚠️ Supabase env vars for Foundation Life are not set.')\n}\n\nexport const supabase = createClient(url ?? '', anonKey ?? '')\n\n"],"names":[],"mappings":";;;;AAEY;AAFZ;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,uNAAY,EAAC,OAAO,IAAI,WAAW"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/lib/life-defaults.ts"],"sourcesContent":["/**\n * Default values for the life plan (setup inicial).\n * Retorno anual 6%; inflação IPCA+5%.\n */\nfunction getDefaultBirthDate(): string {\n  const d = new Date()\n  d.setFullYear(d.getFullYear() - 30)\n  return d.toISOString().slice(0, 10) // YYYY-MM-DD\n}\n\nexport const LIFE_PLAN_DEFAULTS = {\n  getDefaultBirthDate,\n  lifeExpectancyYears: 90,\n  baseNetWorth: 0,\n  baseMonthlyIncome: 8000,\n  baseMonthlyExpenses: 5000,\n  monthlyContribution: 1500,\n  expectedReturnYearly: 6,\n  inflationYearly: 5,\n  inflationLabel: 'IPCA+5',\n  inflateIncome: true,\n  inflateExpenses: true,\n  retirementAge: 65,\n  retirementMonthlyIncome: 0,\n  inflateRetirementIncome: true,\n} as const\n\nexport type LifePlanDefaults = typeof LIFE_PLAN_DEFAULTS\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GACD,SAAS;IACP,MAAM,IAAI,IAAI;IACd,EAAE,WAAW,CAAC,EAAE,WAAW,KAAK;IAChC,OAAO,EAAE,WAAW,GAAG,KAAK,CAAC,GAAG,IAAI,aAAa;;AACnD;AAEO,MAAM,qBAAqB;IAChC;IACA,qBAAqB;IACrB,cAAc;IACd,mBAAmB;IACnB,qBAAqB;IACrB,qBAAqB;IACrB,sBAAsB;IACtB,iBAAiB;IACjB,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,eAAe;IACf,yBAAyB;IACzB,yBAAyB;AAC3B"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,+LAAO,EAAC,IAAA,sKAAI,EAAC;AACtB"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-transparent hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        xl: 'h-12 rounded-lg px-8 text-base',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button'\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,gMAAG,EACxB,8SACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,iMAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,iMAAI,GAAG;IAC9B,qBACE,mNAAC;QACC,WAAW,IAAA,kJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = 'Input'\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,iMAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,mNAAC;QACC,MAAM;QACN,WAAW,IAAA,kJAAE,EACX,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/label.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface LabelProps extends React.LabelHTMLAttributes<HTMLLabelElement> {}\n\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\n  ({ className, ...props }, ref) => (\n    <label\n      ref={ref}\n      className={cn(\n        'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n        className\n      )}\n      {...props}\n    />\n  )\n)\nLabel.displayName = 'Label'\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,iMAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;;AAIf,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      'rounded-lg border bg-card text-card-foreground shadow-sm',\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = 'Card'\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex flex-col space-y-1.5 p-6', className)}\n    {...props}\n  />\n))\nCardHeader.displayName = 'CardHeader'\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      'text-2xl font-semibold leading-none tracking-tight',\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = 'CardTitle'\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nCardDescription.displayName = 'CardDescription'\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n))\nCardContent.displayName = 'CardContent'\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex items-center p-6 pt-0', className)}\n    {...props}\n  />\n))\nCardFooter.displayName = 'CardFooter'\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,iMAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,iMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,iMAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,iMAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,iMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kJAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,iMAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/onboarding/components/setup-wizard.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { LIFE_PLAN_DEFAULTS } from '@/lib/life-defaults'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\n\nexport interface SetupWizardPayload {\n  birthDate: string\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nconst STEPS = [\n  {\n    key: 'birthDate',\n    label: 'Qual sua data de nascimento?',\n    type: 'date' as const,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.getDefaultBirthDate(),\n  },\n  {\n    key: 'lifeExpectancy',\n    label: 'Até quantos anos você quer planejar?',\n    placeholder: 'Ex: 90',\n    min: 60,\n    max: 110,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.lifeExpectancyYears,\n  },\n  {\n    key: 'baseNetWorth',\n    label: 'Qual seu patrimônio atual? (R$)',\n    placeholder: '0',\n    min: 0,\n    step: 1000,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.baseNetWorth,\n  },\n  {\n    key: 'baseMonthlyIncome',\n    label: 'Qual sua renda líquida mensal? (R$)',\n    placeholder: 'Ex: 8000',\n    min: 0,\n    step: 500,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.baseMonthlyIncome,\n  },\n  {\n    key: 'baseMonthlyExpenses',\n    label: 'Quanto você gasta por mês, em média? (R$)',\n    placeholder: 'Ex: 5000',\n    min: 0,\n    step: 500,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.baseMonthlyExpenses,\n  },\n] as const\n\ninterface SetupWizardProps {\n  onComplete: (payload: SetupWizardPayload) => void\n  isLoading?: boolean\n}\n\nexport function SetupWizard({ onComplete, isLoading }: SetupWizardProps) {\n  const [step, setStep] = useState(0)\n  const [values, setValues] = useState<Record<string, number | string>>(() => {\n    const initial: Record<string, number | string> = {}\n    STEPS.forEach(s => {\n      initial[s.key] = s.fromPayload()\n    })\n    return initial\n  })\n\n  const current = STEPS[step]\n  const value = values[current.key] ?? current.fromPayload()\n  const isDateStep = 'type' in current && current.type === 'date'\n  const isLast = step === STEPS.length - 1\n  const progress = ((step + 1) / STEPS.length) * 100\n\n  function handleNext() {\n    if (isLast) {\n      const birthDateRaw = values.birthDate ?? LIFE_PLAN_DEFAULTS.getDefaultBirthDate()\n      const birthDateStr = typeof birthDateRaw === 'string' ? birthDateRaw : LIFE_PLAN_DEFAULTS.getDefaultBirthDate()\n      onComplete({\n        birthDate: new Date(birthDateStr + 'T12:00:00').toISOString(),\n        lifeExpectancyYears: (values.lifeExpectancy as number) ?? LIFE_PLAN_DEFAULTS.lifeExpectancyYears,\n        baseNetWorth: (values.baseNetWorth as number) ?? LIFE_PLAN_DEFAULTS.baseNetWorth,\n        baseMonthlyIncome: (values.baseMonthlyIncome as number) ?? LIFE_PLAN_DEFAULTS.baseMonthlyIncome,\n        baseMonthlyExpenses: (values.baseMonthlyExpenses as number) ?? LIFE_PLAN_DEFAULTS.baseMonthlyExpenses,\n        monthlyContribution: Math.max(\n          0,\n          ((values.baseMonthlyIncome as number) ?? LIFE_PLAN_DEFAULTS.baseMonthlyIncome) -\n            ((values.baseMonthlyExpenses as number) ?? LIFE_PLAN_DEFAULTS.baseMonthlyExpenses)\n        ),\n        expectedReturnYearly: LIFE_PLAN_DEFAULTS.expectedReturnYearly,\n        inflationYearly: LIFE_PLAN_DEFAULTS.inflationYearly,\n        inflateIncome: LIFE_PLAN_DEFAULTS.inflateIncome,\n        inflateExpenses: LIFE_PLAN_DEFAULTS.inflateExpenses,\n        retirementAge: LIFE_PLAN_DEFAULTS.retirementAge,\n        retirementMonthlyIncome: LIFE_PLAN_DEFAULTS.retirementMonthlyIncome,\n        inflateRetirementIncome: LIFE_PLAN_DEFAULTS.inflateRetirementIncome,\n      })\n    } else {\n      setStep(s => s + 1)\n    }\n  }\n\n  function handleBack() {\n    if (step > 0) setStep(s => s - 1)\n  }\n\n  return (\n    <div className=\"mx-auto flex min-h-[60vh] max-w-md flex-col justify-center px-4 py-8\">\n      <Card className=\"border-border/50 bg-card/50 backdrop-blur-sm\">\n        <CardHeader className=\"space-y-1 pb-4\">\n          <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n            <span>Passo {step + 1} de {STEPS.length}</span>\n          </div>\n          <div className=\"h-2 w-full overflow-hidden rounded-full bg-secondary\">\n            <div\n              className=\"h-full rounded-full bg-primary transition-all duration-300 ease-out\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"wizard-input\" className=\"text-base font-medium\">\n              {current.label}\n            </Label>\n            {isDateStep ? (\n              <Input\n                id=\"wizard-input\"\n                type=\"date\"\n                value={typeof value === 'string' ? value : ''}\n                onChange={e => setValues(prev => ({ ...prev, [current.key]: e.target.value }))}\n                onKeyDown={e => e.key === 'Enter' && handleNext()}\n                className=\"h-12 text-base\"\n                autoFocus\n              />\n            ) : (\n              <Input\n                id=\"wizard-input\"\n                type=\"number\"\n                min={'min' in current ? current.min : undefined}\n                max={'max' in current ? current.max : undefined}\n                step={'step' in current ? current.step : 1}\n                value={typeof value === 'number' ? value : Number(value) || 0}\n                onChange={e => setValues(prev => ({ ...prev, [current.key]: Number(e.target.value) || 0 }))}\n                onKeyDown={e => e.key === 'Enter' && handleNext()}\n                placeholder={'placeholder' in current ? current.placeholder : undefined}\n                className=\"h-12 text-base\"\n                autoFocus\n              />\n            )}\n          </div>\n\n          <div className=\"flex gap-3 pt-2\">\n            {step > 0 && (\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={handleBack}\n                className=\"shrink-0\"\n              >\n                Voltar\n              </Button>\n            )}\n            <Button\n              type=\"button\"\n              onClick={handleNext}\n              disabled={isLoading}\n              className=\"min-w-[140px] flex-1\"\n            >\n              {isLoading ? 'Criando...' : isLast ? 'Criar meu plano' : 'Continuar'}\n            </Button>\n          </div>\n\n          <p className=\"text-center text-xs text-muted-foreground\">\n            Premissas: retorno {LIFE_PLAN_DEFAULTS.expectedReturnYearly}% a.a. · Inflação {LIFE_PLAN_DEFAULTS.inflationLabel}\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/contexts/currency-context.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, type ReactNode } from 'react'\nimport type { CurrencyCode } from '@/lib/format-currency'\n\ninterface CurrencyContextValue {\n  currency: CurrencyCode\n  setCurrency: (code: CurrencyCode) => void\n}\n\nconst CurrencyContext = createContext<CurrencyContextValue | null>(null)\n\nexport function CurrencyProvider({\n  currency,\n  setCurrency,\n  children,\n}: {\n  currency: CurrencyCode\n  setCurrency: (code: CurrencyCode) => void\n  children: ReactNode\n}) {\n  return (\n    <CurrencyContext.Provider value={{ currency, setCurrency }}>\n      {children}\n    </CurrencyContext.Provider>\n  )\n}\n\nexport function useCurrency(): CurrencyCode {\n  const ctx = useContext(CurrencyContext)\n  return ctx?.currency ?? 'BRL'\n}\n\nexport function useCurrencySetter(): ((code: CurrencyCode) => void) | undefined {\n  return useContext(CurrencyContext)?.setCurrency\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;AAFA;;AAUA,MAAM,gCAAkB,IAAA,oMAAa,EAA8B;AAE5D,SAAS,iBAAiB,EAC/B,QAAQ,EACR,WAAW,EACX,QAAQ,EAKT;IACC,qBACE,mNAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;YAAU;QAAY;kBACtD;;;;;;AAGP;KAdgB;AAgBT,SAAS;;IACd,MAAM,MAAM,IAAA,iMAAU,EAAC;IACvB,OAAO,KAAK,YAAY;AAC1B;GAHgB;AAKT,SAAS;;IACd,OAAO,IAAA,iMAAU,EAAC,kBAAkB;AACtC;IAFgB"}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/lib/format-currency.ts"],"sourcesContent":["export const CURRENCIES = [\n  { code: 'BRL', name: 'Real (BRL)', locale: 'pt-BR' },\n  { code: 'USD', name: 'Dólar (USD)', locale: 'en-US' },\n  { code: 'EUR', name: 'Euro (EUR)', locale: 'de-DE' },\n] as const\n\nexport type CurrencyCode = (typeof CURRENCIES)[number]['code']\n\nexport function formatCurrency(value: number, currency: CurrencyCode = 'BRL'): string {\n  const config = CURRENCIES.find(c => c.code === currency) ?? CURRENCIES[0]\n  return Math.round(value).toLocaleString(config.locale, {\n    style: 'currency',\n    currency: config.code,\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  })\n}\n\n/** Short format for charts (e.g. 1k, 1.5M) with optional currency symbol prefix */\nexport function formatCurrencyShort(value: number, currency: CurrencyCode = 'BRL'): string {\n  const abs = Math.abs(value)\n  let suffix = ''\n  if (abs >= 1e6) suffix = (value / 1e6).toFixed(1).replace(/\\.0$/, '') + 'M'\n  else if (abs >= 1e3) suffix = (value / 1e3).toFixed(1).replace(/\\.0$/, '') + 'k'\n  else suffix = String(Math.round(value))\n  const symbols: Record<CurrencyCode, string> = { BRL: 'R$', USD: '$', EUR: '€' }\n  return `${symbols[currency]} ${suffix}`\n}\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,aAAa;IACxB;QAAE,MAAM;QAAO,MAAM;QAAc,QAAQ;IAAQ;IACnD;QAAE,MAAM;QAAO,MAAM;QAAe,QAAQ;IAAQ;IACpD;QAAE,MAAM;QAAO,MAAM;QAAc,QAAQ;IAAQ;CACpD;AAIM,SAAS,eAAe,KAAa,EAAE,WAAyB,KAAK;IAC1E,MAAM,SAAS,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,aAAa,UAAU,CAAC,EAAE;IACzE,OAAO,KAAK,KAAK,CAAC,OAAO,cAAc,CAAC,OAAO,MAAM,EAAE;QACrD,OAAO;QACP,UAAU,OAAO,IAAI;QACrB,uBAAuB;QACvB,uBAAuB;IACzB;AACF;AAGO,SAAS,oBAAoB,KAAa,EAAE,WAAyB,KAAK;IAC/E,MAAM,MAAM,KAAK,GAAG,CAAC;IACrB,IAAI,SAAS;IACb,IAAI,OAAO,KAAK,SAAS,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,OAAO,CAAC,QAAQ,MAAM;SACnE,IAAI,OAAO,KAAK,SAAS,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,OAAO,CAAC,QAAQ,MAAM;SACxE,SAAS,OAAO,KAAK,KAAK,CAAC;IAChC,MAAM,UAAwC;QAAE,KAAK;QAAM,KAAK;QAAK,KAAK;IAAI;IAC9E,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ;AACzC"}},
    {"offset": {"line": 710, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-timeline-chart.tsx"],"sourcesContent":["'use client'\n\nimport { useMemo } from 'react'\nimport {\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n} from 'recharts'\nimport type { LifeMonthlyPoint } from '@/modules/core/domain/life-types'\nimport { useCurrency } from '@/contexts/currency-context'\nimport { formatCurrencyShort } from '@/lib/format-currency'\n\nconst MONTH_NAMES = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez']\n\ninterface LifeTimelineChartProps {\n  data: LifeMonthlyPoint[]\n}\n\nexport function LifeTimelineChart({ data }: LifeTimelineChartProps) {\n  const currency = useCurrency()\n  const { chartData, showMonthly, xAxisKey, xInterval } = useMemo(() => {\n    const isShortRange = data.length > 0 && data.length <= 24\n    if (isShortRange) {\n      const points = data.map(point => ({\n        label: `${MONTH_NAMES[point.date.getMonth()]} ${point.date.getFullYear()}`,\n        sortKey: point.date.getTime(),\n        netWorth: Math.round(point.netWorth),\n        realNetWorth: Math.round(point.realNetWorth),\n      }))\n      return { chartData: points, showMonthly: true, xAxisKey: 'label' as const, xInterval: 0 as const }\n    }\n    const yearlyPoints = data.filter(point => point.date.getMonth() === 0)\n    const points = yearlyPoints.map(point => ({\n      label: String(point.date.getFullYear()),\n      sortKey: point.date.getTime(),\n      netWorth: Math.round(point.netWorth),\n      realNetWorth: Math.round(point.realNetWorth),\n    }))\n    const interval = points.length > 20 ? Math.floor(points.length / 10) : 0\n    return { chartData: points, showMonthly: false, xAxisKey: 'label' as const, xInterval: interval }\n  }, [data])\n\n  if (chartData.length === 0) {\n    return (\n      <div className=\"flex h-64 items-center justify-center rounded-xl border border-border bg-muted/30 text-sm text-muted-foreground\">\n        Nenhum dado no período selecionado. Altere o filtro ou configure seus dados.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"h-72 w-full rounded-xl border border-border bg-muted/20 p-4\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <LineChart data={chartData}>\n          <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" />\n          <XAxis\n            dataKey={xAxisKey}\n            className=\"text-muted-foreground\"\n            tickLine={false}\n            interval={showMonthly && chartData.length > 6 ? 'preserveStartEnd' : xInterval}\n            height={22}\n            style={{ fontSize: 14 }}\n          />\n          <YAxis\n            className=\"text-muted-foreground\"\n            tickLine={false}\n            tickFormatter={v => formatCurrencyShort(v, currency)}\n          />\n          <Tooltip\n            contentStyle={{\n              backgroundColor: 'hsl(var(--card))',\n              borderRadius: 8,\n              border: '1px solid hsl(var(--border))',\n              fontSize: 12,\n            }}\n            formatter={(value: number, name: string) => [formatCurrencyShort(value, currency), name]}\n          />\n          <Line\n            type=\"monotone\"\n            dataKey=\"netWorth\"\n            stroke=\"hsl(var(--chart-1))\"\n            strokeWidth={2}\n            dot={false}\n            name=\"Patrimônio (nominal)\"\n          />\n          <Line\n            type=\"monotone\"\n            dataKey=\"realNetWorth\"\n            stroke=\"hsl(var(--chart-2))\"\n            strokeWidth={2}\n            dot={false}\n            name=\"Patrimônio (real)\"\n          />\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;;;AAdA;;;;;AAgBA,MAAM,cAAc;IAAC;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;IAAO;CAAM;AAMjG,SAAS,kBAAkB,EAAE,IAAI,EAA0B;;IAChE,MAAM,WAAW,IAAA,+KAAW;IAC5B,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,IAAA,8LAAO;qCAAC;YAC9D,MAAM,eAAe,KAAK,MAAM,GAAG,KAAK,KAAK,MAAM,IAAI;YACvD,IAAI,cAAc;gBAChB,MAAM,SAAS,KAAK,GAAG;wDAAC,CAAA,QAAS,CAAC;4BAChC,OAAO,GAAG,WAAW,CAAC,MAAM,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,EAAE,MAAM,IAAI,CAAC,WAAW,IAAI;4BAC1E,SAAS,MAAM,IAAI,CAAC,OAAO;4BAC3B,UAAU,KAAK,KAAK,CAAC,MAAM,QAAQ;4BACnC,cAAc,KAAK,KAAK,CAAC,MAAM,YAAY;wBAC7C,CAAC;;gBACD,OAAO;oBAAE,WAAW;oBAAQ,aAAa;oBAAM,UAAU;oBAAkB,WAAW;gBAAW;YACnG;YACA,MAAM,eAAe,KAAK,MAAM;0DAAC,CAAA,QAAS,MAAM,IAAI,CAAC,QAAQ,OAAO;;YACpE,MAAM,SAAS,aAAa,GAAG;oDAAC,CAAA,QAAS,CAAC;wBACxC,OAAO,OAAO,MAAM,IAAI,CAAC,WAAW;wBACpC,SAAS,MAAM,IAAI,CAAC,OAAO;wBAC3B,UAAU,KAAK,KAAK,CAAC,MAAM,QAAQ;wBACnC,cAAc,KAAK,KAAK,CAAC,MAAM,YAAY;oBAC7C,CAAC;;YACD,MAAM,WAAW,OAAO,MAAM,GAAG,KAAK,KAAK,KAAK,CAAC,OAAO,MAAM,GAAG,MAAM;YACvE,OAAO;gBAAE,WAAW;gBAAQ,aAAa;gBAAO,UAAU;gBAAkB,WAAW;YAAS;QAClG;oCAAG;QAAC;KAAK;IAET,IAAI,UAAU,MAAM,KAAK,GAAG;QAC1B,qBACE,mNAAC;YAAI,WAAU;sBAAkH;;;;;;IAIrI;IAEA,qBACE,mNAAC;QAAI,WAAU;kBACb,cAAA,mNAAC,mNAAmB;YAAC,OAAM;YAAO,QAAO;sBACvC,cAAA,mNAAC,2LAAS;gBAAC,MAAM;;kCACf,mNAAC,uMAAa;wBAAC,iBAAgB;wBAAM,WAAU;;;;;;kCAC/C,mNAAC,uLAAK;wBACJ,SAAS;wBACT,WAAU;wBACV,UAAU;wBACV,UAAU,eAAe,UAAU,MAAM,GAAG,IAAI,qBAAqB;wBACrE,QAAQ;wBACR,OAAO;4BAAE,UAAU;wBAAG;;;;;;kCAExB,mNAAC,uLAAK;wBACJ,WAAU;wBACV,UAAU;wBACV,eAAe,CAAA,IAAK,IAAA,gLAAmB,EAAC,GAAG;;;;;;kCAE7C,mNAAC,2LAAO;wBACN,cAAc;4BACZ,iBAAiB;4BACjB,cAAc;4BACd,QAAQ;4BACR,UAAU;wBACZ;wBACA,WAAW,CAAC,OAAe,OAAiB;gCAAC,IAAA,gLAAmB,EAAC,OAAO;gCAAW;6BAAK;;;;;;kCAE1F,mNAAC,qLAAI;wBACH,MAAK;wBACL,SAAQ;wBACR,QAAO;wBACP,aAAa;wBACb,KAAK;wBACL,MAAK;;;;;;kCAEP,mNAAC,qLAAI;wBACH,MAAK;wBACL,SAAQ;wBACR,QAAO;wBACP,aAAa;wBACb,KAAK;wBACL,MAAK;;;;;;;;;;;;;;;;;;;;;;AAMjB;GA/EgB;;QACG,+KAAW;;;KADd"}},
    {"offset": {"line": 911, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-projection-table.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useMemo, Fragment } from 'react'\nimport type { LifeYearlyPoint, LifeMonthlyPoint } from '@/modules/core/domain/life-types'\nimport { cn } from '@/lib/utils'\nimport { useCurrency } from '@/contexts/currency-context'\nimport { formatCurrency } from '@/lib/format-currency'\n\ninterface LifeProjectionTableProps {\n  yearlyData: LifeYearlyPoint[]\n  monthlyData: LifeMonthlyPoint[]\n}\n\nconst MONTH_NAMES = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez']\n\nexport function LifeProjectionTable({\n  yearlyData,\n  monthlyData,\n}: LifeProjectionTableProps) {\n  const currency = useCurrency()\n  const [expandedYear, setExpandedYear] = useState<number | null>(null)\n\n  const monthlyByYear = useMemo(() => {\n    const map = new Map<number, LifeMonthlyPoint[]>()\n    for (const p of monthlyData) {\n      const y = p.date.getFullYear()\n      if (!map.has(y)) map.set(y, [])\n      map.get(y)!.push(p)\n    }\n    map.forEach(arr => arr.sort((a, b) => a.date.getTime() - b.date.getTime()))\n    return map\n  }, [monthlyData])\n\n  if (!yearlyData.length) {\n    return (\n      <div className=\"rounded-lg border border-border bg-muted/20 py-8 text-center text-sm text-muted-foreground\">\n        Nenhum dado no período. Altere o filtro acima.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"overflow-hidden rounded-2xl border border-border bg-muted/10\">\n        <table className=\"min-w-full divide-y divide-border text-sm\">\n          <thead className=\"bg-muted/50\">\n            <tr>\n              <th className=\"w-8 px-2 py-2\" aria-hidden />\n              <th className=\"px-4 py-2 text-left text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                Ano\n              </th>\n              <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                Idade\n              </th>\n              <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                Renda anual\n              </th>\n              <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                Gastos anuais\n              </th>\n              <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                Aportes\n              </th>\n              <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-muted-foreground\">\n                Patrimônio final\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"divide-y divide-border\">\n            {yearlyData.map(row => (\n              <Fragment key={row.year}>\n                <tr\n                  className={cn(\n                    'cursor-pointer transition-colors hover:bg-muted/50',\n                    expandedYear === row.year && 'bg-muted/50'\n                  )}\n                  onClick={() => setExpandedYear(y => (y === row.year ? null : row.year))}\n                >\n                  <td className=\"w-8 px-2 py-2 text-muted-foreground\">\n                    {expandedYear === row.year ? '▼' : '▶'}\n                  </td>\n                  <td className=\"px-4 py-2 text-foreground\">{row.year}</td>\n                  <td className=\"px-4 py-2 text-right text-muted-foreground\">{row.age}</td>\n                  <td className=\"px-4 py-2 text-right text-muted-foreground\">\n                    {formatCurrency(row.income, currency)}\n                  </td>\n                  <td className=\"px-4 py-2 text-right text-muted-foreground\">\n                    {formatCurrency(row.expenses, currency)}\n                  </td>\n                  <td className=\"px-4 py-2 text-right text-muted-foreground\">\n                    {formatCurrency(row.contribution, currency)}\n                  </td>\n                  <td className=\"px-4 py-2 text-right font-medium text-foreground\">\n                    {formatCurrency(row.netWorth, currency)}\n                  </td>\n                </tr>\n                {expandedYear === row.year && (() => {\n                  const months = monthlyByYear.get(row.year) ?? []\n                  if (!months.length) {\n                    return (\n                      <tr key={`${row.year}-empty`}>\n                        <td colSpan={7} className=\"bg-muted/20 px-4 py-2 text-center text-xs text-muted-foreground\">\n                          Nenhum dado mensal para este ano.\n                        </td>\n                      </tr>\n                    )\n                  }\n                  return (\n                    <tr key={`${row.year}-monthly`}>\n                      <td colSpan={7} className=\"bg-muted/20 p-0\">\n                        <table className=\"min-w-full text-xs\">\n                          <thead>\n                            <tr className=\"border-b border-border/50 text-muted-foreground\">\n                              <th className=\"px-4 py-1.5 text-left\">Mês</th>\n                              <th className=\"px-4 py-1.5 text-right\">Idade</th>\n                              <th className=\"px-4 py-1.5 text-right\">Renda</th>\n                              <th className=\"px-4 py-1.5 text-right\">Gastos</th>\n                              <th className=\"px-4 py-1.5 text-right\">Aporte</th>\n                              <th className=\"px-4 py-1.5 text-right\">Patrimônio</th>\n                            </tr>\n                          </thead>\n                          <tbody>\n                            {months.map((m, i) => (\n                              <tr key={i} className=\"border-b border-border/30 last:border-0\">\n                                <td className=\"px-4 py-1.5 text-muted-foreground\">\n                                  {MONTH_NAMES[m.date.getMonth()]} {m.date.getFullYear()}\n                                </td>\n                                <td className=\"px-4 py-1.5 text-right text-muted-foreground\">{m.age}</td>\n                                <td className=\"px-4 py-1.5 text-right text-muted-foreground\">\n                                  {formatCurrency(m.income, currency)}\n                                </td>\n                                <td className=\"px-4 py-1.5 text-right text-muted-foreground\">\n                                  {formatCurrency(m.expenses, currency)}\n                                </td>\n                                <td className=\"px-4 py-1.5 text-right text-muted-foreground\">\n                                  {formatCurrency(m.contribution, currency)}\n                                </td>\n                                <td className=\"px-4 py-1.5 text-right font-medium text-foreground\">\n                                  {formatCurrency(m.netWorth, currency)}\n                                </td>\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </td>\n                    </tr>\n                  )\n                })()}\n              </Fragment>\n            ))}\n          </tbody>\n        </table>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1330, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/constants/event-types.ts"],"sourcesContent":["import type { LifeEventType } from '@/modules/core/domain/life-types'\n\n/** Rótulos alinhados ao Foundation Hub (eventIcons / goals-events). */\nexport const EVENT_TYPE_LABELS: Record<LifeEventType, string> = {\n  goal: 'Objetivo / Meta',\n  contribution: 'Aporte',\n  car: 'Carro',\n  house: 'Casa / Imóvel',\n  travel: 'Viagem',\n  accident: 'Imprevisto / Acidente',\n  renovation: 'Reforma',\n  other: 'Outro',\n}\n\n/** Tipos de evento no formulário. */\nexport const EVENT_TYPES: LifeEventType[] = [\n  'goal',\n  'contribution',\n  'car',\n  'house',\n  'travel',\n  'accident',\n  'renovation',\n  'other',\n]\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,oBAAmD;IAC9D,MAAM;IACN,cAAc;IACd,KAAK;IACL,OAAO;IACP,QAAQ;IACR,UAAU;IACV,YAAY;IACZ,OAAO;AACT;AAGO,MAAM,cAA+B;IAC1C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 1363, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-event-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { EVENT_TYPE_LABELS, EVENT_TYPES } from '../constants/event-types'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { cn } from '@/lib/utils'\n\ninterface LifeEventFormProps {\n  onSubmit: (event: {\n    type: LifeEventType\n    title: string\n    date: string\n    endDate?: string\n    amount: number\n    frequency: 'once' | 'monthly' | 'yearly'\n    durationMonths?: number\n    inflationIndexed: boolean\n  }) => void\n  onCancel?: () => void\n}\n\nconst selectClassName =\n  'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2'\n\nexport function LifeEventForm({ onSubmit, onCancel }: LifeEventFormProps) {\n  const [type, setType] = useState<LifeEventType>('contribution')\n  const [title, setTitle] = useState('')\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 10))\n  const [amount, setAmount] = useState(0)\n  const [frequency, setFrequency] = useState<'once' | 'monthly' | 'yearly'>('once')\n  const [inflationIndexed, setInflationIndexed] = useState(true)\n\n  function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    if (!title.trim()) return\n    onSubmit({\n      type,\n      title: title.trim(),\n      date: new Date(date).toISOString(),\n      amount: Number(amount) || 0,\n      frequency,\n      inflationIndexed,\n    })\n    setTitle('')\n    setAmount(0)\n    setDate(new Date().toISOString().slice(0, 10))\n  }\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-base\">Novo evento de vida</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label>Tipo</Label>\n              <select\n                value={type}\n                onChange={e => setType(e.target.value as LifeEventType)}\n                className={cn(selectClassName)}\n              >\n                {EVENT_TYPES.map(t => (\n                  <option key={t} value={t}>\n                    {EVENT_TYPE_LABELS[t]}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Título</Label>\n              <Input\n                value={title}\n                onChange={e => setTitle(e.target.value)}\n                placeholder=\"Ex: Promoção, Compra do carro\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Data</Label>\n              <Input type=\"date\" value={date} onChange={e => setDate(e.target.value)} />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Valor (R$)</Label>\n              <Input\n                type=\"number\"\n                step=\"0.01\"\n                value={amount || ''}\n                onChange={e => setAmount(Number(e.target.value))}\n                placeholder=\"0\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Frequência</Label>\n              <select\n                value={frequency}\n                onChange={e => setFrequency(e.target.value as 'once' | 'monthly' | 'yearly')}\n                className={cn(selectClassName)}\n              >\n                <option value=\"once\">Uma vez</option>\n                <option value=\"monthly\">Mensal</option>\n                <option value=\"yearly\">Anual</option>\n              </select>\n            </div>\n            <div className=\"flex items-center gap-2 pt-8 sm:col-span-2\">\n              <input\n                type=\"checkbox\"\n                id=\"inflation\"\n                checked={inflationIndexed}\n                onChange={e => setInflationIndexed(e.target.checked)}\n                className=\"h-4 w-4 rounded border-input\"\n              />\n              <Label htmlFor=\"inflation\" className=\"font-normal text-muted-foreground\">\n                Ajustar pela inflação\n              </Label>\n            </div>\n          </div>\n          <div className=\"flex gap-2 pt-2\">\n            <Button type=\"submit\" size=\"sm\">\n              Adicionar evento\n            </Button>\n            {onCancel && (\n              <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={onCancel}>\n                Cancelar\n              </Button>\n            )}\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1690, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-events-list.tsx"],"sourcesContent":["'use client'\n\nimport { EVENT_TYPE_LABELS } from '../constants/event-types'\nimport type { LifeEvent } from '@/modules/core/domain/life-types'\nimport { Button } from '@/components/ui/button'\nimport { useCurrency } from '@/contexts/currency-context'\nimport { formatCurrency } from '@/lib/format-currency'\n\ninterface LifeEventsListProps {\n  events: LifeEvent[]\n  onDelete: (id: string) => void\n}\n\nexport function LifeEventsList({ events, onDelete }: LifeEventsListProps) {\n  const currency = useCurrency()\n  if (events.length === 0) {\n    return (\n      <p className=\"text-sm text-muted-foreground\">\n        Nenhum evento ainda. Adicione mudanças de renda, grandes compras, filhos, aposentadoria, etc.\n      </p>\n    )\n  }\n\n  return (\n    <ul className=\"space-y-2\">\n      {events.map(event => (\n        <li\n          key={event.id}\n          className=\"flex items-center justify-between gap-3 rounded-lg border border-border bg-muted/30 px-3 py-2\"\n        >\n          <div className=\"min-w-0 flex-1\">\n            <p className=\"truncate text-sm font-medium text-foreground\">\n              {event.title}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              {EVENT_TYPE_LABELS[event.type as keyof typeof EVENT_TYPE_LABELS] ?? event.type} · {new Date(event.date).toLocaleDateString('pt-BR')}\n              {event.frequency !== 'once' && ` · ${event.frequency}`}\n            </p>\n          </div>\n          <div className=\"flex shrink-0 items-center gap-2\">\n            <span className=\"text-sm text-muted-foreground\">\n              {event.amount >= 0\n                ? `+${formatCurrency(event.amount, currency)}`\n                : formatCurrency(event.amount, currency)}\n            </span>\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => onDelete(event.id)}\n              className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\n              aria-label=\"Excluir evento\"\n            >\n              ×\n            </Button>\n          </div>\n        </li>\n      ))}\n    </ul>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;;;AANA;;;;;AAaO,SAAS,eAAe,EAAE,MAAM,EAAE,QAAQ,EAAuB;;IACtE,MAAM,WAAW,IAAA,+KAAW;IAC5B,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,qBACE,mNAAC;YAAE,WAAU;sBAAgC;;;;;;IAIjD;IAEA,qBACE,mNAAC;QAAG,WAAU;kBACX,OAAO,GAAG,CAAC,CAAA,sBACV,mNAAC;gBAEC,WAAU;;kCAEV,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAE,WAAU;0CACV,MAAM,KAAK;;;;;;0CAEd,mNAAC;gCAAE,WAAU;;oCACV,uMAAiB,CAAC,MAAM,IAAI,CAAmC,IAAI,MAAM,IAAI;oCAAC;oCAAI,IAAI,KAAK,MAAM,IAAI,EAAE,kBAAkB,CAAC;oCAC1H,MAAM,SAAS,KAAK,UAAU,CAAC,GAAG,EAAE,MAAM,SAAS,EAAE;;;;;;;;;;;;;kCAG1D,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAK,WAAU;0CACb,MAAM,MAAM,IAAI,IACb,CAAC,CAAC,EAAE,IAAA,2KAAc,EAAC,MAAM,MAAM,EAAE,WAAW,GAC5C,IAAA,2KAAc,EAAC,MAAM,MAAM,EAAE;;;;;;0CAEnC,mNAAC,qKAAM;gCACL,MAAK;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS,IAAM,SAAS,MAAM,EAAE;gCAChC,WAAU;gCACV,cAAW;0CACZ;;;;;;;;;;;;;eAzBE,MAAM,EAAE;;;;;;;;;;AAiCvB;GA/CgB;;QACG,+KAAW;;;KADd"}},
    {"offset": {"line": 1811, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/core/utils/micro-plan-utils.ts"],"sourcesContent":["import type { LifeMicroPlan } from '../domain/life-types'\n\n/**\n * Returns the active micro plan for a given month: the latest micro plan whose\n * effectiveDate is on or before the start of the given month.\n * If none applies (all plans are in the future), returns null.\n */\nexport function getActiveMicroPlanForDate(\n  microPlans: LifeMicroPlan[],\n  targetDate: Date\n): LifeMicroPlan | null {\n  if (!microPlans?.length) return null\n\n  const targetYear = targetDate.getFullYear()\n  const targetMonth = targetDate.getMonth()\n\n  const sorted = [...microPlans].sort(\n    (a, b) =>\n      new Date(a.effectiveDate).getTime() - new Date(b.effectiveDate).getTime()\n  )\n\n  let active: LifeMicroPlan | null = null\n  for (const plan of sorted) {\n    const d = new Date(plan.effectiveDate)\n    const planYear = d.getFullYear()\n    const planMonth = d.getMonth()\n    if (planYear < targetYear || (planYear === targetYear && planMonth <= targetMonth)) {\n      active = plan\n    }\n  }\n  return active\n}\n"],"names":[],"mappings":";;;;AAOO,SAAS,0BACd,UAA2B,EAC3B,UAAgB;IAEhB,IAAI,CAAC,YAAY,QAAQ,OAAO;IAEhC,MAAM,aAAa,WAAW,WAAW;IACzC,MAAM,cAAc,WAAW,QAAQ;IAEvC,MAAM,SAAS;WAAI;KAAW,CAAC,IAAI,CACjC,CAAC,GAAG,IACF,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO;IAG3E,IAAI,SAA+B;IACnC,KAAK,MAAM,QAAQ,OAAQ;QACzB,MAAM,IAAI,IAAI,KAAK,KAAK,aAAa;QACrC,MAAM,WAAW,EAAE,WAAW;QAC9B,MAAM,YAAY,EAAE,QAAQ;QAC5B,IAAI,WAAW,cAAe,aAAa,cAAc,aAAa,aAAc;YAClF,SAAS;QACX;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 1840, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/core/services/projection-engine.ts"],"sourcesContent":["import {\n  LifeEvent,\n  LifeMonthlyPoint,\n  LifeYearlyPoint,\n  ProjectionParams,\n  ProjectionResult,\n} from '../domain/life-types'\nimport { getActiveMicroPlanForDate } from '../utils/micro-plan-utils'\n\nfunction yearlyToMonthlyRate(yearlyPercent: number): number {\n  const yearly = yearlyPercent / 100\n  if (yearly <= -1) return 0\n  return Math.pow(1 + yearly, 1 / 12) - 1\n}\n\nfunction getMonthsDiff(start: Date, end: Date): number {\n  return (end.getFullYear() - start.getFullYear()) * 12 + (end.getMonth() - start.getMonth())\n}\n\nfunction cloneDate(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate())\n}\n\ninterface MonthEventImpact {\n  income: number\n  expenses: number\n  extraIncome: number\n  extraExpenses: number\n  /** One-time outflow in this month (e.g. large purchase) — reduces net worth directly */\n  oneTimeOutflow: number\n  /** One-time inflow (e.g. sale of asset) — increases net worth directly */\n  oneTimeInflow: number\n}\n\nfunction applyEventsForMonth(baseIncome: number, baseExpenses: number, date: Date, events: LifeEvent[]): MonthEventImpact {\n  let income = baseIncome\n  let expenses = baseExpenses\n  let extraIncome = 0\n  let extraExpenses = 0\n  let oneTimeOutflow = 0\n  let oneTimeInflow = 0\n\n  for (const event of events) {\n    const eventMonthKey = event.date.getFullYear() * 12 + event.date.getMonth()\n    const currentMonthKey = date.getFullYear() * 12 + date.getMonth()\n\n    const isWithinDuration =\n      !event.endDate || (date >= event.date && date <= event.endDate)\n\n    if (!isWithinDuration) continue\n\n    const isIncome = event.type === 'contribution'\n    const amount = event.amount\n    const absAmount = Math.abs(amount)\n\n    if (event.frequency === 'once') {\n      if (currentMonthKey !== eventMonthKey) continue\n      if (isIncome) {\n        extraIncome += amount\n      } else {\n        oneTimeOutflow += absAmount\n        extraExpenses += absAmount\n      }\n    }\n\n    if (event.frequency === 'monthly') {\n      if (currentMonthKey < eventMonthKey) continue\n      if (isIncome) income += amount\n      else expenses += absAmount\n    }\n\n    if (event.frequency === 'yearly') {\n      if (date.getMonth() !== event.date.getMonth()) continue\n      if (date.getFullYear() < event.date.getFullYear()) continue\n      if (isIncome) extraIncome += amount\n      else extraExpenses += absAmount\n    }\n  }\n\n  return { income, expenses, extraIncome, extraExpenses, oneTimeOutflow, oneTimeInflow }\n}\n\nexport function buildLifeProjection(params: ProjectionParams): ProjectionResult {\n  const { profile, settings, events, microPlans = [] } = params\n\n  const monthlyReturnRate = yearlyToMonthlyRate(settings.expectedReturnYearly)\n  const monthlyInflationRate = yearlyToMonthlyRate(settings.inflationYearly)\n\n  const startDate = new Date()\n  const endDate = cloneDate(profile.birthDate)\n  endDate.setFullYear(endDate.getFullYear() + profile.lifeExpectancyYears)\n\n  const totalMonths = Math.max(0, getMonthsDiff(startDate, endDate))\n\n  let currentNetWorth = settings.baseNetWorth\n  let accumulatedInflation = 1\n  let firstMonthWithZeroOrNegativeNetWorth: number | null = null\n\n  const monthly: LifeMonthlyPoint[] = []\n\n  const retirementAge = settings.retirementAge ?? 65\n  const inflateIncome = settings.inflateIncome ?? true\n  const inflateExpenses = settings.inflateExpenses ?? true\n  const inflateRetirementIncome = settings.inflateRetirementIncome ?? true\n  const retirementMonthlyIncome = settings.retirementMonthlyIncome ?? 0\n\n  for (let i = 0; i <= totalMonths; i++) {\n    const currentDate = new Date(startDate.getFullYear(), startDate.getMonth() + i, 1)\n    const age =\n      currentDate.getFullYear() - profile.birthDate.getFullYear() -\n      (currentDate.getMonth() < profile.birthDate.getMonth() ? 1 : 0)\n\n    const activeMicro = getActiveMicroPlanForDate(microPlans, currentDate)\n    const baseIncomeForMonth = activeMicro\n      ? activeMicro.monthlyIncome\n      : (age < retirementAge ? settings.baseMonthlyIncome : retirementMonthlyIncome)\n    const baseExpensesForMonth = activeMicro ? activeMicro.monthlyExpenses : settings.baseMonthlyExpenses\n    const inflateIncomeForMonth = age < retirementAge ? inflateIncome : inflateRetirementIncome\n    const nominalBaseIncome = inflateIncomeForMonth ? baseIncomeForMonth * accumulatedInflation : baseIncomeForMonth\n    const nominalBaseExpenses = inflateExpenses ? baseExpensesForMonth * accumulatedInflation : baseExpensesForMonth\n\n    const impact = applyEventsForMonth(\n      nominalBaseIncome,\n      nominalBaseExpenses,\n      currentDate,\n      events,\n    )\n\n    const monthIncome = impact.income + impact.extraIncome\n    const monthExpenses = impact.expenses + impact.extraExpenses\n    const contribution = Math.max(0, monthIncome - monthExpenses)\n\n    // Apply one-time inflows/outflows (e.g. large purchase reduces patrimônio; sale adds)\n    currentNetWorth += impact.oneTimeInflow - impact.oneTimeOutflow\n    if (i >= 1 && currentNetWorth <= 0 && firstMonthWithZeroOrNegativeNetWorth === null) {\n      firstMonthWithZeroOrNegativeNetWorth = i\n    }\n    const preReturnNetWorth = currentNetWorth + contribution\n    const returns = preReturnNetWorth * monthlyReturnRate\n    currentNetWorth = preReturnNetWorth + returns\n    if (i >= 1 && currentNetWorth <= 0 && firstMonthWithZeroOrNegativeNetWorth === null) {\n      firstMonthWithZeroOrNegativeNetWorth = i\n    }\n\n    accumulatedInflation *= 1 + monthlyInflationRate\n    const realNetWorth = currentNetWorth / accumulatedInflation\n\n    monthly.push({\n      date: currentDate,\n      age,\n      netWorth: currentNetWorth,\n      realNetWorth,\n      income: monthIncome,\n      expenses: monthExpenses,\n      contribution,\n      returns,\n    })\n  }\n\n  const yearlyMap = new Map<number, LifeYearlyPoint>()\n\n  for (const point of monthly) {\n    const year = point.date.getFullYear()\n    const existing = yearlyMap.get(year)\n\n    if (!existing) {\n      yearlyMap.set(year, {\n        year,\n        age: point.age,\n        netWorth: point.netWorth,\n        realNetWorth: point.realNetWorth,\n        income: point.income,\n        expenses: point.expenses,\n        contribution: point.contribution,\n        returns: point.returns,\n      })\n    } else {\n      existing.netWorth = point.netWorth\n      existing.realNetWorth = point.realNetWorth\n      existing.income += point.income\n      existing.expenses += point.expenses\n      existing.contribution += point.contribution\n      existing.returns += point.returns\n    }\n  }\n\n  const yearly = Array.from(yearlyMap.values()).sort((a, b) => a.year - b.year)\n\n  return { monthly, yearly, firstMonthWithZeroOrNegativeNetWorth }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1994, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport type CurrencyCode = 'BRL' | 'USD' | 'EUR'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n  baseCurrency?: CurrencyCode\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  baseCurrency: CurrencyCode\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    baseCurrency: (profile.baseCurrency as CurrencyCode) || 'BRL',\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  const baseCurrency = payload.baseCurrency ?? 'BRL'\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAsDsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,+CAAA"}},
    {"offset": {"line": 2011, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport type CurrencyCode = 'BRL' | 'USD' | 'EUR'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n  baseCurrency?: CurrencyCode\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  baseCurrency: CurrencyCode\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    baseCurrency: (profile.baseCurrency as CurrencyCode) || 'BRL',\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  const baseCurrency = payload.baseCurrency ?? 'BRL'\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAyHsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,gDAAA"}},
    {"offset": {"line": 2028, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport type CurrencyCode = 'BRL' | 'USD' | 'EUR'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n  baseCurrency?: CurrencyCode\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  baseCurrency: CurrencyCode\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    baseCurrency: (profile.baseCurrency as CurrencyCode) || 'BRL',\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  const baseCurrency = payload.baseCurrency ?? 'BRL'\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAkMsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,iDAAA"}},
    {"offset": {"line": 2045, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport type CurrencyCode = 'BRL' | 'USD' | 'EUR'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n  baseCurrency?: CurrencyCode\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  baseCurrency: CurrencyCode\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    baseCurrency: (profile.baseCurrency as CurrencyCode) || 'BRL',\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  const baseCurrency = payload.baseCurrency ?? 'BRL'\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MA4NsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,mDAAA"}},
    {"offset": {"line": 2062, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport type CurrencyCode = 'BRL' | 'USD' | 'EUR'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n  baseCurrency?: CurrencyCode\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  baseCurrency: CurrencyCode\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    baseCurrency: (profile.baseCurrency as CurrencyCode) || 'BRL',\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  const baseCurrency = payload.baseCurrency ?? 'BRL'\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAsOsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,qDAAA"}},
    {"offset": {"line": 2079, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport type CurrencyCode = 'BRL' | 'USD' | 'EUR'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n  baseCurrency?: CurrencyCode\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  baseCurrency: CurrencyCode\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    baseCurrency: (profile.baseCurrency as CurrencyCode) || 'BRL',\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  const baseCurrency = payload.baseCurrency ?? 'BRL'\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseCurrency,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAiRsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,uDAAA"}},
    {"offset": {"line": 2096, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/micro-plans/components/life-micro-plan-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\n\nexport interface LifeMicroPlanFormPayload {\n  effectiveDate: string\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\ninterface LifeMicroPlanFormProps {\n  onSubmit: (payload: LifeMicroPlanFormPayload) => void\n  onCancel?: () => void\n  defaultDate?: string\n}\n\nexport function LifeMicroPlanForm({\n  onSubmit,\n  onCancel,\n  defaultDate = new Date().toISOString().slice(0, 10),\n}: LifeMicroPlanFormProps) {\n  const [effectiveDate, setEffectiveDate] = useState(defaultDate)\n  const [monthlyIncome, setMonthlyIncome] = useState(0)\n  const [monthlyExpenses, setMonthlyExpenses] = useState(0)\n\n  function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    onSubmit({\n      effectiveDate,\n      monthlyIncome,\n      monthlyExpenses,\n      monthlyContribution: Math.max(0, monthlyIncome - monthlyExpenses),\n    })\n  }\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-base\">Novo micro plano</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label>A partir de (data)</Label>\n              <Input\n                type=\"date\"\n                value={effectiveDate}\n                onChange={e => setEffectiveDate(e.target.value)}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Renda mensal (R$)</Label>\n              <Input\n                type=\"number\"\n                min={0}\n                value={monthlyIncome || ''}\n                onChange={e => setMonthlyIncome(Number(e.target.value))}\n                placeholder=\"0\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Gastos mensais (R$)</Label>\n              <Input\n                type=\"number\"\n                min={0}\n                value={monthlyExpenses || ''}\n                onChange={e => setMonthlyExpenses(Number(e.target.value))}\n                placeholder=\"0\"\n              />\n            </div>\n          </div>\n          <p className=\"text-xs text-muted-foreground\">\n            O aporte é calculado automaticamente (renda − gastos).\n          </p>\n          <div className=\"flex gap-2 pt-2\">\n            <Button type=\"submit\" size=\"sm\">\n              Adicionar\n            </Button>\n            {onCancel && (\n              <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={onCancel}>\n                Cancelar\n              </Button>\n            )}\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAqBO,SAAS,kBAAkB,EAChC,QAAQ,EACR,QAAQ,EACR,cAAc,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAG,GAAG,EAC5B;;IACvB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+LAAQ,EAAC;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+LAAQ,EAAC;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+LAAQ,EAAC;IAEvD,SAAS,aAAa,CAAkB;QACtC,EAAE,cAAc;QAChB,SAAS;YACP;YACA;YACA;YACA,qBAAqB,KAAK,GAAG,CAAC,GAAG,gBAAgB;QACnD;IACF;IAEA,qBACE,mNAAC,iKAAI;;0BACH,mNAAC,uKAAU;gBAAC,WAAU;0BACpB,cAAA,mNAAC,sKAAS;oBAAC,WAAU;8BAAY;;;;;;;;;;;0BAEnC,mNAAC,wKAAW;0BACV,cAAA,mNAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,mNAAC;4BAAI,WAAU;;8CACb,mNAAC;oCAAI,WAAU;;sDACb,mNAAC,mKAAK;sDAAC;;;;;;sDACP,mNAAC,mKAAK;4CACJ,MAAK;4CACL,OAAO;4CACP,UAAU,CAAA,IAAK,iBAAiB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8CAGlD,mNAAC;oCAAI,WAAU;;sDACb,mNAAC,mKAAK;sDAAC;;;;;;sDACP,mNAAC,mKAAK;4CACJ,MAAK;4CACL,KAAK;4CACL,OAAO,iBAAiB;4CACxB,UAAU,CAAA,IAAK,iBAAiB,OAAO,EAAE,MAAM,CAAC,KAAK;4CACrD,aAAY;;;;;;;;;;;;8CAGhB,mNAAC;oCAAI,WAAU;;sDACb,mNAAC,mKAAK;sDAAC;;;;;;sDACP,mNAAC,mKAAK;4CACJ,MAAK;4CACL,KAAK;4CACL,OAAO,mBAAmB;4CAC1B,UAAU,CAAA,IAAK,mBAAmB,OAAO,EAAE,MAAM,CAAC,KAAK;4CACvD,aAAY;;;;;;;;;;;;;;;;;;sCAIlB,mNAAC;4BAAE,WAAU;sCAAgC;;;;;;sCAG7C,mNAAC;4BAAI,WAAU;;8CACb,mNAAC,qKAAM;oCAAC,MAAK;oCAAS,MAAK;8CAAK;;;;;;gCAG/B,0BACC,mNAAC,qKAAM;oCAAC,MAAK;oCAAS,SAAQ;oCAAU,MAAK;oCAAK,SAAS;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASnF;GAzEgB;KAAA"}},
    {"offset": {"line": 2304, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/micro-plans/components/life-micro-plans-list.tsx"],"sourcesContent":["'use client'\n\nimport { Button } from '@/components/ui/button'\nimport { useCurrency } from '@/contexts/currency-context'\nimport { formatCurrency } from '@/lib/format-currency'\n\nexport interface LifeMicroPlanItem {\n  id: string\n  effectiveDate: string\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\ninterface LifeMicroPlansListProps {\n  microPlans: LifeMicroPlanItem[]\n  onDelete: (id: string) => void\n}\n\nfunction formatDate(isoDate: string): string {\n  return new Date(isoDate + 'T12:00:00').toLocaleDateString('pt-BR', {\n    month: 'short',\n    year: 'numeric',\n  })\n}\n\nexport function LifeMicroPlansList({ microPlans, onDelete }: LifeMicroPlansListProps) {\n  const currency = useCurrency()\n  if (microPlans.length === 0) {\n    return (\n      <p className=\"text-sm text-muted-foreground\">\n        Nenhum micro plano. Adicione para definir mudanças de renda, gastos e aporte a partir de uma data.\n      </p>\n    )\n  }\n\n  const sorted = [...microPlans].sort(\n    (a, b) => new Date(a.effectiveDate).getTime() - new Date(b.effectiveDate).getTime()\n  )\n\n  return (\n    <ul className=\"space-y-2\">\n      {sorted.map(plan => (\n        <li\n          key={plan.id}\n          className=\"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-border bg-muted/30 px-3 py-2\"\n        >\n          <div className=\"min-w-0 flex-1\">\n            <p className=\"text-sm font-medium text-foreground\">\n              A partir de {formatDate(plan.effectiveDate)}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Renda {formatCurrency(plan.monthlyIncome, currency)} · Gastos {formatCurrency(plan.monthlyExpenses, currency)} · Aporte {formatCurrency(plan.monthlyContribution, currency)}\n            </p>\n          </div>\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => onDelete(plan.id)}\n            className=\"h-8 w-8 shrink-0 text-muted-foreground hover:text-destructive\"\n            aria-label=\"Excluir micro plano\"\n          >\n            ×\n          </Button>\n        </li>\n      ))}\n    </ul>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAmBA,SAAS,WAAW,OAAe;IACjC,OAAO,IAAI,KAAK,UAAU,aAAa,kBAAkB,CAAC,SAAS;QACjE,OAAO;QACP,MAAM;IACR;AACF;AAEO,SAAS,mBAAmB,EAAE,UAAU,EAAE,QAAQ,EAA2B;;IAClF,MAAM,WAAW,IAAA,+KAAW;IAC5B,IAAI,WAAW,MAAM,KAAK,GAAG;QAC3B,qBACE,mNAAC;YAAE,WAAU;sBAAgC;;;;;;IAIjD;IAEA,MAAM,SAAS;WAAI;KAAW,CAAC,IAAI,CACjC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO;IAGnF,qBACE,mNAAC;QAAG,WAAU;kBACX,OAAO,GAAG,CAAC,CAAA,qBACV,mNAAC;gBAEC,WAAU;;kCAEV,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAE,WAAU;;oCAAsC;oCACpC,WAAW,KAAK,aAAa;;;;;;;0CAE5C,mNAAC;gCAAE,WAAU;;oCAAgC;oCACpC,IAAA,2KAAc,EAAC,KAAK,aAAa,EAAE;oCAAU;oCAAW,IAAA,2KAAc,EAAC,KAAK,eAAe,EAAE;oCAAU;oCAAW,IAAA,2KAAc,EAAC,KAAK,mBAAmB,EAAE;;;;;;;;;;;;;kCAGtK,mNAAC,qKAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,SAAS,KAAK,EAAE;wBAC/B,WAAU;wBACV,cAAW;kCACZ;;;;;;;eAlBI,KAAK,EAAE;;;;;;;;;;AAyBtB;GA3CgB;;QACG,+KAAW;;;KADd"}},
    {"offset": {"line": 2420, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/collapsible-card.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\ninterface CollapsibleCardProps {\n  title: string\n  description?: string\n  defaultOpen?: boolean\n  /** When provided, card is controlled by parent (e.g. sidebar). */\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n  children: React.ReactNode\n  className?: string\n  headerAction?: React.ReactNode\n}\n\nexport function CollapsibleCard({\n  title,\n  description,\n  defaultOpen = false,\n  open: controlledOpen,\n  onOpenChange,\n  children,\n  className,\n  headerAction,\n}: CollapsibleCardProps) {\n  const [internalOpen, setInternalOpen] = useState(defaultOpen)\n  const isControlled = controlledOpen !== undefined\n  const open = isControlled ? controlledOpen : internalOpen\n  const setOpen = isControlled ? (onOpenChange ?? (() => {})) : setInternalOpen\n\n  return (\n    <Card className={cn('overflow-hidden', className)}>\n      <CardHeader\n        className=\"cursor-pointer select-none space-y-0 py-4 transition-colors hover:bg-muted/50\"\n        onClick={() => setOpen(!open)}\n      >\n        <div className=\"flex items-center justify-between gap-2\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-muted-foreground\" aria-hidden>\n              {open ? '▼' : '▶'}\n            </span>\n            <div>\n              <CardTitle className=\"text-base\">{title}</CardTitle>\n              {description && (\n                <CardDescription className=\"mt-0.5\">{description}</CardDescription>\n              )}\n            </div>\n          </div>\n          {headerAction && (\n            <div onClick={e => e.stopPropagation()}>{headerAction}</div>\n          )}\n        </div>\n      </CardHeader>\n      {open && <CardContent className=\"pt-0\">{children}</CardContent>}\n    </Card>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;;;AALA;;;;AAmBO,SAAS,gBAAgB,EAC9B,KAAK,EACL,WAAW,EACX,cAAc,KAAK,EACnB,MAAM,cAAc,EACpB,YAAY,EACZ,QAAQ,EACR,SAAS,EACT,YAAY,EACS;;IACrB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+LAAQ,EAAC;IACjD,MAAM,eAAe,mBAAmB;IACxC,MAAM,OAAO,eAAe,iBAAiB;IAC7C,MAAM,UAAU,eAAgB,gBAAgB,CAAC,KAAO,CAAC,IAAK;IAE9D,qBACE,mNAAC,iKAAI;QAAC,WAAW,IAAA,kJAAE,EAAC,mBAAmB;;0BACrC,mNAAC,uKAAU;gBACT,WAAU;gBACV,SAAS,IAAM,QAAQ,CAAC;0BAExB,cAAA,mNAAC;oBAAI,WAAU;;sCACb,mNAAC;4BAAI,WAAU;;8CACb,mNAAC;oCAAK,WAAU;oCAAwB,aAAW;8CAChD,OAAO,MAAM;;;;;;8CAEhB,mNAAC;;sDACC,mNAAC,sKAAS;4CAAC,WAAU;sDAAa;;;;;;wCACjC,6BACC,mNAAC,4KAAe;4CAAC,WAAU;sDAAU;;;;;;;;;;;;;;;;;;wBAI1C,8BACC,mNAAC;4BAAI,SAAS,CAAA,IAAK,EAAE,eAAe;sCAAK;;;;;;;;;;;;;;;;;YAI9C,sBAAQ,mNAAC,wKAAW;gBAAC,WAAU;0BAAQ;;;;;;;;;;;;AAG9C;GAzCgB;KAAA"}},
    {"offset": {"line": 2536, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/chart-range-filter.tsx"],"sourcesContent":["'use client'\n\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { cn } from '@/lib/utils'\n\nexport type ChartRangePreset = 'current_year' | 'next_5' | 'next_10' | 'all' | 'custom'\n\nexport interface ChartRangeFilterState {\n  preset: ChartRangePreset\n  customStart: string // YYYY-MM\n  customEnd: string\n}\n\nconst PRESETS: { value: ChartRangePreset; label: string }[] = [\n  { value: 'current_year', label: 'Ano atual' },\n  { value: 'next_5', label: 'Próximos 5 anos' },\n  { value: 'next_10', label: 'Próximos 10 anos' },\n  { value: 'all', label: 'Todos' },\n  { value: 'custom', label: 'Personalizado' },\n]\n\nfunction getMonthKey(date: Date): number {\n  return date.getFullYear() * 12 + date.getMonth()\n}\n\nexport function getChartRange(state: ChartRangeFilterState): { startKey: number; endKey: number } {\n  const now = new Date()\n  const currentKey = getMonthKey(now)\n\n  switch (state.preset) {\n    case 'current_year':\n      return { startKey: currentKey, endKey: currentKey + 11 }\n    case 'next_5':\n      return { startKey: currentKey, endKey: currentKey + 60 }\n    case 'next_10':\n      return { startKey: currentKey, endKey: currentKey + 120 }\n    case 'all':\n      return { startKey: currentKey, endKey: currentKey + 1200 }\n    case 'custom': {\n      const [sy, sm] = state.customStart.split('-').map(Number)\n      const [ey, em] = state.customEnd.split('-').map(Number)\n      const startKey = sy * 12 + (sm - 1)\n      const endKey = ey * 12 + (em - 1)\n      return { startKey, endKey }\n    }\n    default:\n      return { startKey: currentKey, endKey: currentKey + 120 }\n  }\n}\n\nconst defaultState: ChartRangeFilterState = {\n  preset: 'all',\n  customStart: new Date().toISOString().slice(0, 7),\n  customEnd: new Date(Date.now() + 10 * 365.25 * 24 * 60 * 60 * 1000).toISOString().slice(0, 7),\n}\n\ninterface ChartRangeFilterProps {\n  value: ChartRangeFilterState\n  onChange: (value: ChartRangeFilterState) => void\n  className?: string\n}\n\nexport function ChartRangeFilter({ value, onChange, className }: ChartRangeFilterProps) {\n  function handlePreset(preset: ChartRangePreset) {\n    onChange({ ...value, preset })\n  }\n\n  function handleCustomRange(field: 'customStart' | 'customEnd', v: string) {\n    onChange({ ...value, [field]: v })\n  }\n\n  return (\n    <div className={cn('flex flex-wrap items-center gap-2', className)}>\n      {PRESETS.map(p => (\n        <Button\n          key={p.value}\n          type=\"button\"\n          variant={value.preset === p.value ? 'default' : 'outline'}\n          size=\"sm\"\n          onClick={() => handlePreset(p.value)}\n        >\n          {p.label}\n        </Button>\n      ))}\n      {value.preset === 'custom' && (\n        <div className=\"ml-2 flex flex-wrap items-center gap-2 border-l border-border pl-2\">\n          <div className=\"flex items-center gap-1\">\n            <Label htmlFor=\"chart-start\" className=\"text-xs text-muted-foreground whitespace-nowrap\">\n              Início\n            </Label>\n            <Input\n              id=\"chart-start\"\n              type=\"month\"\n              value={value.customStart}\n              onChange={e => handleCustomRange('customStart', e.target.value)}\n              className=\"h-8 w-36\"\n            />\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <Label htmlFor=\"chart-end\" className=\"text-xs text-muted-foreground whitespace-nowrap\">\n              Fim\n            </Label>\n            <Input\n              id=\"chart-end\"\n              type=\"month\"\n              value={value.customEnd}\n              onChange={e => handleCustomRange('customEnd', e.target.value)}\n              className=\"h-8 w-36\"\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport function getDefaultChartRangeState(): ChartRangeFilterState {\n  return defaultState\n}\n\nexport function filterMonthlyByRange<T extends { date: Date }>(\n  data: T[],\n  range: { startKey: number; endKey: number }\n): T[] {\n  return data.filter(p => {\n    const k = p.date.getFullYear() * 12 + p.date.getMonth()\n    return k >= range.startKey && k <= range.endKey\n  })\n}\n\nexport function filterYearlyByRange<T extends { year: number }>(\n  yearly: T[],\n  range: { startKey: number; endKey: number }\n): T[] {\n  const startYear = Math.floor(range.startKey / 12)\n  const endYear = Math.floor(range.endKey / 12)\n  return yearly.filter(r => r.year >= startYear && r.year <= endYear)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2756, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/dashboard/components/edit-sidebar.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\nconst NAV_SECTIONS = [\n  { key: 'projecao' as const, label: 'Projeção', icon: IconChart },\n  { key: 'insights' as const, label: 'Insights', icon: IconLightbulb },\n  { key: 'tabela' as const, label: 'Tabela anual', icon: IconTable },\n] as const\n\nconst EDIT_SECTIONS = [\n  { key: 'you' as const, label: 'Você hoje', icon: IconUser },\n  { key: 'aposentadoria' as const, label: 'Aposentadoria', icon: IconPension },\n  { key: 'microPlans' as const, label: 'Micro planos', icon: IconLayers },\n  { key: 'events' as const, label: 'Eventos', icon: IconCalendar },\n  { key: 'configuracoes' as const, label: 'Configurações', icon: IconSliders },\n] as const\n\nconst iconClass = 'size-4 shrink-0 text-muted-foreground'\n\nfunction IconChart({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\" />\n    </svg>\n  )\n}\n\nfunction IconLightbulb({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\" />\n      <path d=\"M9 18h6\" />\n      <path d=\"M10 22h4\" />\n    </svg>\n  )\n}\n\nfunction IconTable({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M12 3v18\" />\n      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" />\n      <path d=\"M3 9h18\" />\n      <path d=\"M3 15h18\" />\n    </svg>\n  )\n}\n\nfunction IconUser({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\" />\n      <circle cx=\"12\" cy=\"7\" r=\"4\" />\n    </svg>\n  )\n}\n\nfunction IconSliders({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <line x1=\"4\" y1=\"21\" x2=\"4\" y2=\"14\" />\n      <line x1=\"4\" y1=\"10\" x2=\"4\" y2=\"3\" />\n      <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"12\" />\n      <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"3\" />\n      <line x1=\"20\" y1=\"21\" x2=\"20\" y2=\"16\" />\n      <line x1=\"20\" y1=\"12\" x2=\"20\" y2=\"3\" />\n      <line x1=\"1\" y1=\"14\" x2=\"7\" y2=\"14\" />\n      <line x1=\"9\" y1=\"8\" x2=\"15\" y2=\"8\" />\n      <line x1=\"17\" y1=\"16\" x2=\"23\" y2=\"16\" />\n    </svg>\n  )\n}\n\nfunction IconLayers({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <polygon points=\"12 2 2 7 12 12 22 7 12 2\" />\n      <polyline points=\"2 17 12 22 22 17\" />\n    </svg>\n  )\n}\n\nfunction IconCalendar({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n      <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\" />\n      <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\" />\n      <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\" />\n    </svg>\n  )\n}\n\nfunction IconPension({ className }: { className?: string }) {\n  return (\n    <svg className={cn(iconClass, className)} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <circle cx=\"12\" cy=\"12\" r=\"5\" />\n      <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\" />\n      <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\" />\n      <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\" />\n      <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\" />\n      <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\" />\n      <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\" />\n      <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\" />\n      <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\" />\n    </svg>\n  )\n}\n\nexport type SidebarKey = 'projecao' | 'insights' | 'tabela' | 'you' | 'aposentadoria' | 'microPlans' | 'events' | 'configuracoes'\n\n/** @deprecated Use SidebarKey */\nexport type EditSectionKey = SidebarKey\n\nfunction IconChevronLeft({ className }: { className?: string }) {\n  return (\n    <svg className={cn('size-4', className)} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M15 18l-6-6 6-6\" />\n    </svg>\n  )\n}\n\nfunction IconChevronRight({ className }: { className?: string }) {\n  return (\n    <svg className={cn('size-4', className)} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n      <path d=\"M9 18l6-6-6-6\" />\n    </svg>\n  )\n}\n\ninterface EditSidebarProps {\n  onSelect: (key: SidebarKey) => void\n  className?: string\n  /** Mobile: render as overlay when true */\n  isOverlay?: boolean\n  onCloseOverlay?: () => void\n}\n\nexport function EditSidebar({ onSelect, className, isOverlay, onCloseOverlay }: EditSidebarProps) {\n  const [collapsed, setCollapsed] = useState(false)\n  const isMinimizable = !isOverlay\n\n  const content = (\n    <aside\n      className={cn(\n        'flex flex-col gap-1.5 rounded-md border border-border bg-muted/30 py-1 transition-[width] duration-200',\n        isOverlay && 'w-full min-w-0',\n        !isOverlay && collapsed && 'w-11 px-1',\n        !isOverlay && !collapsed && 'w-52 px-1.5',\n        className\n      )}\n    >\n      {isMinimizable && (\n        <div className=\"flex items-center justify-end px-0.5\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-6 w-6 shrink-0 text-muted-foreground hover:text-foreground\"\n            onClick={() => setCollapsed(c => !c)}\n            aria-label={collapsed ? 'Expandir sidebar' : 'Recolher sidebar'}\n          >\n            {collapsed ? <IconChevronRight /> : <IconChevronLeft />}\n          </Button>\n        </div>\n      )}\n      <div>\n        {(!isMinimizable || !collapsed) && (\n          <p className=\"mb-0.5 px-1.5 py-0.5 text-[11px] font-medium uppercase tracking-wide text-muted-foreground\">Conteúdo</p>\n        )}\n        {NAV_SECTIONS.map(({ key, label, icon: Icon }) => (\n          <Button\n            key={key}\n            variant=\"ghost\"\n            size=\"sm\"\n            className={cn(\n              'h-7 text-xs',\n              isMinimizable && collapsed ? 'w-full justify-center px-0' : 'w-full justify-start gap-2 px-1.5'\n            )}\n            onClick={() => {\n              onSelect(key)\n              onCloseOverlay?.()\n            }}\n          >\n            <Icon />\n            {(!isMinimizable || !collapsed) && <span>{label}</span>}\n          </Button>\n        ))}\n      </div>\n      <div className=\"border-t border-border pt-1.5\">\n        {(!isMinimizable || !collapsed) && (\n          <p className=\"mb-0.5 px-1.5 py-0.5 text-[11px] font-medium uppercase tracking-wide text-muted-foreground\">Editar dados</p>\n        )}\n        {EDIT_SECTIONS.map(({ key, label, icon: Icon }) => (\n          <Button\n            key={key}\n            variant=\"ghost\"\n            size=\"sm\"\n            className={cn(\n              'h-7 text-xs',\n              isMinimizable && collapsed ? 'w-full justify-center px-0' : 'w-full justify-start gap-2 px-1.5'\n            )}\n            onClick={() => {\n              onSelect(key)\n              onCloseOverlay?.()\n            }}\n          >\n            <Icon />\n            {(!isMinimizable || !collapsed) && <span>{label}</span>}\n          </Button>\n        ))}\n      </div>\n    </aside>\n  )\n\n  if (isOverlay) {\n    return (\n      <>\n        <div\n          className=\"fixed inset-0 z-40 bg-black/50 md:hidden\"\n          onClick={onCloseOverlay}\n          aria-hidden\n        />\n        <div className=\"fixed left-0 top-0 z-50 h-full w-[200px] border-r border-border bg-background p-3 pt-20 shadow-xl md:hidden\">\n          {content}\n        </div>\n      </>\n    )\n  }\n\n  return content\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3503, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/insights/utils/life-insights.ts"],"sourcesContent":["import type { LifeProfile, LifeSettings, ProjectionResult } from '@/modules/core/domain/life-types'\nimport { formatCurrency, type CurrencyCode } from '@/lib/format-currency'\n\nexport type InsightType = 'danger' | 'warning' | 'success' | 'info'\n\nexport interface LifeInsight {\n  id: string\n  type: InsightType\n  title: string\n  description: string\n}\n\nexport function getLifeInsights(\n  projection: ProjectionResult,\n  profile: LifeProfile,\n  settings: LifeSettings,\n  currency: CurrencyCode = 'BRL'\n): LifeInsight[] {\n  const insights: LifeInsight[] = []\n  const { monthly, firstMonthWithZeroOrNegativeNetWorth } = projection\n  const monthlyContribution = Math.max(0, settings.baseMonthlyIncome - settings.baseMonthlyExpenses)\n\n  if (firstMonthWithZeroOrNegativeNetWorth !== null) {\n    const point = monthly[firstMonthWithZeroOrNegativeNetWorth]\n    const dateLabel = point\n      ? point.date.toLocaleDateString('pt-BR', { month: 'long', year: 'numeric' })\n      : ''\n    insights.push({\n      id: 'dinheiro-insuficiente',\n      type: 'danger',\n      title: 'Dinheiro insuficiente',\n      description: `Na projeção, o patrimônio atinge zero ou fica negativo${dateLabel ? ` em ${dateLabel}` : ''}. Ajuste renda, gastos ou eventos para evitar esse cenário.`,\n    })\n  }\n\n  if (settings.baseMonthlyExpenses > settings.baseMonthlyIncome) {\n    insights.push({\n      id: 'gastos-maior-renda',\n      type: 'warning',\n      title: 'Gastos superam a renda',\n      description: 'Seus gastos mensais são maiores que a renda. Não há margem para investimentos; o patrimônio tende a cair. Considere reduzir gastos ou aumentar a renda.',\n    })\n  }\n\n  if (monthly.length > 0 && monthlyContribution > 0) {\n    const income = settings.baseMonthlyIncome\n    const pct = Math.round((monthlyContribution / income) * 100)\n    if (pct >= 10 && pct <= 50) {\n      insights.push({\n        id: 'margem-investimento',\n        type: 'info',\n        title: 'Margem para investir',\n        description: `${pct}% da sua renda vai para investimentos (renda − gastos). Boa capacidade de acumulação.`,\n      })\n    } else if (pct > 50) {\n      insights.push({\n        id: 'margem-alta',\n        type: 'success',\n        title: 'Alta capacidade de poupança',\n        description: `${pct}% da sua renda vira aporte. Você pode antecipar metas ou aumentar o padrão de gastos com folga.`,\n      })\n    }\n  }\n\n  const last = monthly[monthly.length - 1]\n  if (last && firstMonthWithZeroOrNegativeNetWorth === null && last.netWorth > 0) {\n    const yearsOfContributions = 10\n    const roughContributions = monthlyContribution * 12 * yearsOfContributions\n    if (last.netWorth > roughContributions * 2) {\n      insights.push({\n        id: 'sobra-no-fim',\n        type: 'success',\n        title: 'Sobra dinheiro ao final',\n        description: `Ao final da projeção sobrariam ${formatCurrency(last.netWorth, currency)}. Você poderia aposentar mais cedo, aumentar gastos ao longo do tempo ou planejar herança/doações.`,\n      })\n    }\n  }\n\n  const retirementAge = settings.retirementAge ?? 65\n  const retirementIncome = settings.retirementMonthlyIncome ?? 0\n  if (retirementIncome > 0 && settings.baseMonthlyExpenses > 0) {\n    const coverage = Math.round((retirementIncome / settings.baseMonthlyExpenses) * 100)\n    if (coverage < 80) {\n      insights.push({\n        id: 'aposentadoria-cobertura',\n        type: 'warning',\n        title: 'Renda na aposentadoria',\n        description: `Na aposentadoria (a partir dos ${retirementAge} anos), a renda projetada cobre cerca de ${coverage}% dos gastos atuais. O restante virá do patrimônio acumulado. Acompanhe se o valor acumulado é suficiente.`,\n      })\n    } else if (coverage >= 100) {\n      insights.push({\n        id: 'aposentadoria-confortavel',\n        type: 'info',\n        title: 'Aposentadoria coberta',\n        description: `Sua renda na aposentadoria cobre os gastos projetados (${coverage}% ou mais). O patrimônio pode servir como reserva ou para desejos extras.`,\n      })\n    }\n  }\n\n  if (monthly.length > 12) {\n    let maxReal = monthly[0].realNetWorth\n    for (let i = 1; i < monthly.length; i++) {\n      if (monthly[i].realNetWorth > maxReal) maxReal = monthly[i].realNetWorth\n    }\n    if (last && last.realNetWorth < maxReal * 0.9) {\n      insights.push({\n        id: 'patrimonio-real-cai',\n        type: 'warning',\n        title: 'Poder de compra do patrimônio',\n        description: 'Em parte da projeção, o patrimônio em termos reais (descontada a inflação) tende a cair. Isso pode ser esperado após aposentadoria; verifique se o ritmo de uso está adequado.',\n      })\n    }\n  }\n\n  if (settings.baseNetWorth <= 0 && monthlyContribution > 0 && firstMonthWithZeroOrNegativeNetWorth === null) {\n    insights.push({\n      id: 'comecando-do-zero',\n      type: 'info',\n      title: 'Começando a acumular',\n      description: 'Você está partindo de patrimônio zero ou negativo. Com aportes regulares e retorno positivo, o patrimônio tende a crescer ao longo do tempo.',\n    })\n  }\n\n  return insights\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3617, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/insights/components/life-insights-card.tsx"],"sourcesContent":["'use client'\n\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport type { LifeInsight, InsightType } from '@/modules/insights/utils/life-insights'\nimport { cn } from '@/lib/utils'\n\nconst TYPE_STYLES: Record<InsightType, string> = {\n  danger: 'border-destructive/50 bg-destructive/10 text-destructive',\n  warning: 'border-amber-500/50 bg-amber-500/10 text-amber-700 dark:text-amber-400',\n  success: 'border-emerald-500/50 bg-emerald-500/10 text-emerald-700 dark:text-emerald-400',\n  info: 'border-primary/50 bg-primary/10 text-primary',\n}\n\nconst TYPE_ICONS: Record<InsightType, string> = {\n  danger: '⚠',\n  warning: '⚡',\n  success: '✓',\n  info: 'ℹ',\n}\n\ninterface LifeInsightsCardProps {\n  insights: LifeInsight[]\n  className?: string\n}\n\nexport function LifeInsightsCard({ insights, className }: LifeInsightsCardProps) {\n  if (insights.length === 0) {\n    return null\n  }\n\n  return (\n    <Card className={cn('overflow-hidden border-l-4 border-l-[hsl(var(--accent-amber))]', className)}>\n      <CardHeader className=\"pb-2\">\n        <CardTitle className=\"text-base\">Insights</CardTitle>\n        <CardDescription>\n          Análise automática da sua projeção: pontos de atenção e oportunidades.\n        </CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {insights.map(insight => (\n          <div\n            key={insight.id}\n            className={cn(\n              'flex gap-3 rounded-lg border px-3 py-2.5 text-sm',\n              TYPE_STYLES[insight.type]\n            )}\n          >\n            <span className=\"shrink-0 text-base\" aria-hidden>\n              {TYPE_ICONS[insight.type]}\n            </span>\n            <div className=\"min-w-0 flex-1\">\n              <p className=\"font-medium\">{insight.title}</p>\n              <p className=\"mt-0.5 text-muted-foreground\">{insight.description}</p>\n            </div>\n          </div>\n        ))}\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAQA;AAVA;;;;AAYA,MAAM,cAA2C;IAC/C,QAAQ;IACR,SAAS;IACT,SAAS;IACT,MAAM;AACR;AAEA,MAAM,aAA0C;IAC9C,QAAQ;IACR,SAAS;IACT,SAAS;IACT,MAAM;AACR;AAOO,SAAS,iBAAiB,EAAE,QAAQ,EAAE,SAAS,EAAyB;IAC7E,IAAI,SAAS,MAAM,KAAK,GAAG;QACzB,OAAO;IACT;IAEA,qBACE,mNAAC,iKAAI;QAAC,WAAW,IAAA,kJAAE,EAAC,kEAAkE;;0BACpF,mNAAC,uKAAU;gBAAC,WAAU;;kCACpB,mNAAC,sKAAS;wBAAC,WAAU;kCAAY;;;;;;kCACjC,mNAAC,4KAAe;kCAAC;;;;;;;;;;;;0BAInB,mNAAC,wKAAW;gBAAC,WAAU;0BACpB,SAAS,GAAG,CAAC,CAAA,wBACZ,mNAAC;wBAEC,WAAW,IAAA,kJAAE,EACX,oDACA,WAAW,CAAC,QAAQ,IAAI,CAAC;;0CAG3B,mNAAC;gCAAK,WAAU;gCAAqB,aAAW;0CAC7C,UAAU,CAAC,QAAQ,IAAI,CAAC;;;;;;0CAE3B,mNAAC;gCAAI,WAAU;;kDACb,mNAAC;wCAAE,WAAU;kDAAe,QAAQ,KAAK;;;;;;kDACzC,mNAAC;wCAAE,WAAU;kDAAgC,QAAQ,WAAW;;;;;;;;;;;;;uBAX7D,QAAQ,EAAE;;;;;;;;;;;;;;;;AAkB3B;KAlCgB"}},
    {"offset": {"line": 3738, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/dashboard/components/life-dashboard.tsx"],"sourcesContent":["'use client'\n\nimport { useMemo, useState, useEffect, useRef } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { supabase } from '@/lib/supabase'\nimport { LIFE_PLAN_DEFAULTS } from '@/lib/life-defaults'\nimport { SetupWizard } from '@/modules/onboarding/components/setup-wizard'\nimport { LifeTimelineChart } from '@/modules/timeline/components/life-timeline-chart'\nimport { LifeProjectionTable } from '@/modules/timeline/components/life-projection-table'\nimport { LifeEventForm } from '@/modules/timeline/components/life-event-form'\nimport { LifeEventsList } from '@/modules/timeline/components/life-events-list'\nimport { buildLifeProjection } from '@/modules/core/services/projection-engine'\nimport type { LifeEvent, LifeEventType } from '@/modules/core/domain/life-types'\nimport {\n  getLifeData,\n  saveLifeData,\n  saveLifeEvent,\n  deleteLifeEvent,\n  saveLifeMicroPlan,\n  deleteLifeMicroPlan,\n} from '@/app/actions/life'\nimport { LifeMicroPlanForm } from '@/modules/micro-plans/components/life-micro-plan-form'\nimport { LifeMicroPlansList } from '@/modules/micro-plans/components/life-micro-plans-list'\nimport type { LifeMicroPlan } from '@/modules/core/domain/life-types'\nimport { cn } from '@/lib/utils'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { CollapsibleCard } from '@/components/ui/collapsible-card'\nimport {\n  ChartRangeFilter,\n  getChartRange,\n  getDefaultChartRangeState,\n  filterMonthlyByRange,\n  filterYearlyByRange,\n  type ChartRangeFilterState,\n} from '@/modules/timeline/components/chart-range-filter'\nimport { EditSidebar, type SidebarKey } from '@/modules/dashboard/components/edit-sidebar'\nimport { getLifeInsights } from '@/modules/insights/utils/life-insights'\nimport { LifeInsightsCard } from '@/modules/insights/components/life-insights-card'\nimport { CurrencyProvider } from '@/contexts/currency-context'\nimport { useTheme, type ThemeMode } from '@/contexts/theme-context'\nimport { CURRENCIES, type CurrencyCode } from '@/lib/format-currency'\n\nexport function LifeDashboard() {\n  const router = useRouter()\n  const [authUserId, setAuthUserId] = useState<string | null>(null)\n  const [scenarioId, setScenarioId] = useState<string | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [setupSaving, setSetupSaving] = useState(false)\n  const [eventSaving, setEventSaving] = useState(false)\n  const [hasPlan, setHasPlan] = useState(false)\n\n  const [birthDate, setBirthDate] = useState(() => {\n    const d = new Date()\n    d.setFullYear(d.getFullYear() - 30)\n    return d.toISOString().slice(0, 10) // YYYY-MM-DD\n  })\n  const [lifeExpectancy, setLifeExpectancy] = useState(LIFE_PLAN_DEFAULTS.lifeExpectancyYears)\n  const [netWorth, setNetWorth] = useState(LIFE_PLAN_DEFAULTS.baseNetWorth)\n  const [income, setIncome] = useState(LIFE_PLAN_DEFAULTS.baseMonthlyIncome)\n  const [expenses, setExpenses] = useState(LIFE_PLAN_DEFAULTS.baseMonthlyExpenses)\n  const [returnYearly, setReturnYearly] = useState(LIFE_PLAN_DEFAULTS.expectedReturnYearly)\n  const [inflationYearly, setInflationYearly] = useState(LIFE_PLAN_DEFAULTS.inflationYearly)\n  const [inflateIncome, setInflateIncome] = useState(LIFE_PLAN_DEFAULTS.inflateIncome)\n  const [inflateExpenses, setInflateExpenses] = useState(LIFE_PLAN_DEFAULTS.inflateExpenses)\n  const [retirementAge, setRetirementAge] = useState(LIFE_PLAN_DEFAULTS.retirementAge)\n  const [retirementMonthlyIncome, setRetirementMonthlyIncome] = useState(LIFE_PLAN_DEFAULTS.retirementMonthlyIncome)\n  const [inflateRetirementIncome, setInflateRetirementIncome] = useState(LIFE_PLAN_DEFAULTS.inflateRetirementIncome)\n  const [currency, setCurrency] = useState<CurrencyCode>('BRL')\n  const { theme, setTheme } = useTheme()\n  const [events, setEvents] = useState<LifeEvent[]>([])\n  const [showEventForm, setShowEventForm] = useState(false)\n  const [microPlans, setMicroPlans] = useState<{ id: string; effectiveDate: string; monthlyIncome: number; monthlyExpenses: number; monthlyContribution: number }[]>([])\n  const [showMicroPlanForm, setShowMicroPlanForm] = useState(false)\n  const [microPlanSaving, setMicroPlanSaving] = useState(false)\n  const [chartRange, setChartRange] = useState<ChartRangeFilterState>(getDefaultChartRangeState())\n  const [sidebarOpen, setSidebarOpen] = useState(false)\n  const [sectionOpen, setSectionOpen] = useState<Record<string, boolean>>({\n    you: false,\n    aposentadoria: false,\n    microPlans: false,\n    events: false,\n    configuracoes: false,\n  })\n  const sectionRefs = useRef<Record<string, HTMLDivElement | null>>({\n    projecao: null,\n    insights: null,\n    tabela: null,\n    you: null,\n    aposentadoria: null,\n    microPlans: null,\n    events: null,\n    configuracoes: null,\n  })\n  const lastSavedPlanRef = useRef<string | null>(null)\n\n  useEffect(() => {\n    async function init() {\n      const { data } = await supabase.auth.getUser()\n      if (!data.user) {\n        router.replace('/login')\n        return\n      }\n      setAuthUserId(data.user.id)\n      const saved = await getLifeData(data.user.id)\n      if (saved) {\n        setHasPlan(true)\n        setBirthDate(saved.birthDate.slice(0, 10)) // YYYY-MM-DD para input date\n        setLifeExpectancy(saved.lifeExpectancyYears)\n        setNetWorth(saved.settings.baseNetWorth)\n        setIncome(saved.settings.baseMonthlyIncome)\n        setExpenses(saved.settings.baseMonthlyExpenses)\n        setReturnYearly(saved.settings.expectedReturnYearly)\n        setInflationYearly(saved.settings.inflationYearly)\n        setInflateIncome(saved.settings.inflateIncome ?? true)\n        setInflateExpenses(saved.settings.inflateExpenses ?? true)\n        setRetirementAge(saved.settings.retirementAge ?? 65)\n        setRetirementMonthlyIncome(saved.settings.retirementMonthlyIncome ?? 0)\n        setInflateRetirementIncome(saved.settings.inflateRetirementIncome ?? true)\n        setCurrency((saved.baseCurrency as CurrencyCode) ?? 'BRL')\n        setScenarioId(saved.scenarioId)\n        setEvents(\n          saved.events.map(e => ({\n            id: e.id!,\n            type: e.type,\n            title: e.title,\n            date: new Date(e.date),\n            endDate: e.endDate ? new Date(e.endDate) : undefined,\n            amount: e.amount,\n            frequency: e.frequency,\n            durationMonths: e.durationMonths,\n            inflationIndexed: e.inflationIndexed ?? true,\n          }))\n        )\n        setMicroPlans(\n          saved.microPlans.map(m => ({\n            id: m.id,\n            effectiveDate: m.effectiveDate,\n            monthlyIncome: m.monthlyIncome,\n            monthlyExpenses: m.monthlyExpenses,\n            monthlyContribution: m.monthlyContribution,\n          }))\n        )\n        lastSavedPlanRef.current = JSON.stringify({\n          birthDate: saved.birthDate.slice(0, 10),\n          lifeExpectancyYears: saved.lifeExpectancyYears,\n          baseNetWorth: saved.settings.baseNetWorth,\n          baseMonthlyIncome: saved.settings.baseMonthlyIncome,\n          baseMonthlyExpenses: saved.settings.baseMonthlyExpenses,\n          baseCurrency: saved.baseCurrency,\n          expectedReturnYearly: saved.settings.expectedReturnYearly,\n          inflationYearly: saved.settings.inflationYearly,\n          inflateIncome: saved.settings.inflateIncome ?? true,\n          inflateExpenses: saved.settings.inflateExpenses ?? true,\n          retirementAge: saved.settings.retirementAge ?? 65,\n          retirementMonthlyIncome: saved.settings.retirementMonthlyIncome ?? 0,\n          inflateRetirementIncome: saved.settings.inflateRetirementIncome ?? true,\n        })\n      }\n      setLoading(false)\n    }\n    init()\n  }, [router])\n\n  async function handleSetupComplete(payload: Parameters<typeof saveLifeData>[1]) {\n    if (!authUserId) return\n    setSetupSaving(true)\n    try {\n      const result = await saveLifeData(authUserId, payload)\n      setScenarioId(result.scenarioId)\n      setHasPlan(true)\n      setBirthDate(payload.birthDate.slice(0, 10))\n      setLifeExpectancy(payload.lifeExpectancyYears)\n      setNetWorth(payload.baseNetWorth)\n      setIncome(payload.baseMonthlyIncome)\n      setExpenses(payload.baseMonthlyExpenses)\n      setReturnYearly(payload.expectedReturnYearly)\n      setInflationYearly(payload.inflationYearly)\n      setInflateIncome(payload.inflateIncome ?? true)\n      setInflateExpenses(payload.inflateExpenses ?? true)\n      setRetirementAge(payload.retirementAge ?? 65)\n      setRetirementMonthlyIncome(payload.retirementMonthlyIncome ?? 0)\n      setInflateRetirementIncome(payload.inflateRetirementIncome ?? true)\n      lastSavedPlanRef.current = JSON.stringify({\n        birthDate: payload.birthDate.slice(0, 10),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n        baseNetWorth: payload.baseNetWorth,\n        baseMonthlyIncome: payload.baseMonthlyIncome,\n        baseMonthlyExpenses: payload.baseMonthlyExpenses,\n        expectedReturnYearly: payload.expectedReturnYearly,\n        inflationYearly: payload.inflationYearly,\n        inflateIncome: payload.inflateIncome ?? true,\n        inflateExpenses: payload.inflateExpenses ?? true,\n        retirementAge: payload.retirementAge ?? 65,\n        retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n        inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n      })\n    } finally {\n      setSetupSaving(false)\n    }\n  }\n\n  const birthDateAsDate = useMemo(\n    () => new Date(birthDate + 'T12:00:00'),\n    [birthDate]\n  )\n\n  const microPlansForEngine: LifeMicroPlan[] = useMemo(\n    () =>\n      microPlans.map(m => ({\n        id: m.id,\n        effectiveDate: new Date(m.effectiveDate + 'T12:00:00'),\n        monthlyIncome: m.monthlyIncome,\n        monthlyExpenses: m.monthlyExpenses,\n        monthlyContribution: m.monthlyContribution,\n      })),\n    [microPlans]\n  )\n\n  const projection = useMemo(\n    () =>\n      buildLifeProjection({\n        profile: {\n          birthDate: birthDateAsDate,\n          lifeExpectancyYears: lifeExpectancy,\n        },\n        settings: {\n          baseNetWorth: netWorth,\n          baseMonthlyIncome: income,\n          baseMonthlyExpenses: expenses,\n          monthlyContribution: Math.max(0, income - expenses),\n          expectedReturnYearly: returnYearly,\n          inflationYearly,\n          inflateIncome,\n          inflateExpenses,\n          retirementAge,\n          retirementMonthlyIncome,\n          inflateRetirementIncome,\n        },\n        events,\n        microPlans: microPlansForEngine,\n      }),\n    [\n      birthDateAsDate,\n      lifeExpectancy,\n      netWorth,\n      income,\n      expenses,\n      returnYearly,\n      inflationYearly,\n      inflateIncome,\n      inflateExpenses,\n      retirementAge,\n      retirementMonthlyIncome,\n      inflateRetirementIncome,\n      events,\n      microPlansForEngine,\n    ]\n  )\n\n  const chartRangeKeys = useMemo(() => getChartRange(chartRange), [chartRange])\n  const filteredMonthly = useMemo(\n    () => filterMonthlyByRange(projection.monthly, chartRangeKeys),\n    [projection.monthly, chartRangeKeys]\n  )\n  const filteredYearly = useMemo(\n    () => filterYearlyByRange(projection.yearly, chartRangeKeys),\n    [projection.yearly, chartRangeKeys]\n  )\n\n  const insights = useMemo(\n    () =>\n      getLifeInsights(\n        projection,\n        { birthDate: birthDateAsDate, lifeExpectancyYears: lifeExpectancy },\n        {\n          baseNetWorth: netWorth,\n          baseMonthlyIncome: income,\n          baseMonthlyExpenses: expenses,\n          monthlyContribution: Math.max(0, income - expenses),\n          expectedReturnYearly: returnYearly,\n          inflationYearly,\n          inflateIncome,\n          inflateExpenses,\n          retirementAge,\n          retirementMonthlyIncome,\n          inflateRetirementIncome,\n        },\n        currency\n      ),\n    [\n      projection,\n      birthDateAsDate,\n      lifeExpectancy,\n      netWorth,\n      income,\n      expenses,\n      returnYearly,\n      inflationYearly,\n      inflateIncome,\n      inflateExpenses,\n      retirementAge,\n      retirementMonthlyIncome,\n      inflateRetirementIncome,\n      currency,\n    ]\n  )\n\n  const derivedContribution = Math.max(0, income - expenses)\n\n  useEffect(() => {\n    if (!authUserId || !hasPlan) return\n    const payload = {\n      birthDate,\n      lifeExpectancyYears: lifeExpectancy,\n      baseNetWorth: netWorth,\n      baseMonthlyIncome: income,\n      baseMonthlyExpenses: expenses,\n      baseCurrency: currency,\n      expectedReturnYearly: returnYearly,\n      inflationYearly,\n      inflateIncome,\n      inflateExpenses,\n      retirementAge,\n      retirementMonthlyIncome,\n      inflateRetirementIncome,\n    }\n    const payloadKey = JSON.stringify(payload)\n    if (payloadKey === lastSavedPlanRef.current) return\n    const t = setTimeout(async () => {\n      setSaving(true)\n      try {\n        const result = await saveLifeData(authUserId, {\n          birthDate: new Date(birthDate + 'T12:00:00').toISOString(),\n          lifeExpectancyYears: lifeExpectancy,\n          baseNetWorth: netWorth,\n          baseMonthlyIncome: income,\n          baseMonthlyExpenses: expenses,\n          monthlyContribution: derivedContribution,\n          expectedReturnYearly: returnYearly,\n          inflationYearly,\n          inflateIncome,\n          inflateExpenses,\n          retirementAge,\n          retirementMonthlyIncome,\n          inflateRetirementIncome,\n          baseCurrency: currency,\n        })\n        setScenarioId(result.scenarioId)\n        lastSavedPlanRef.current = payloadKey\n      } finally {\n        setSaving(false)\n      }\n    }, 1500)\n    return () => clearTimeout(t)\n  }, [\n    authUserId,\n    hasPlan,\n    birthDate,\n    lifeExpectancy,\n    netWorth,\n    income,\n    expenses,\n    currency,\n    returnYearly,\n    inflationYearly,\n    inflateIncome,\n    inflateExpenses,\n    retirementAge,\n    retirementMonthlyIncome,\n    inflateRetirementIncome,\n  ])\n\n  async function handleSavePlan() {\n    if (!authUserId) return\n    setSaving(true)\n    try {\n      const result = await saveLifeData(authUserId, {\n        birthDate: new Date(birthDate + 'T12:00:00').toISOString(),\n        lifeExpectancyYears: lifeExpectancy,\n        baseNetWorth: netWorth,\n        baseMonthlyIncome: income,\n        baseMonthlyExpenses: expenses,\n        monthlyContribution: derivedContribution,\n        expectedReturnYearly: returnYearly,\n        inflationYearly,\n        inflateIncome,\n        inflateExpenses,\n        retirementAge,\n        retirementMonthlyIncome,\n        inflateRetirementIncome,\n        baseCurrency: currency,\n      })\n      setScenarioId(result.scenarioId)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  async function handleAddEvent(payload: {\n    type: LifeEventType\n    title: string\n    date: string\n    endDate?: string\n    amount: number\n    frequency: 'once' | 'monthly' | 'yearly'\n    durationMonths?: number\n    inflationIndexed: boolean\n  }) {\n    if (!authUserId) return\n    let sid = scenarioId\n    if (!sid) {\n      const result = await saveLifeData(authUserId, {\n        birthDate: new Date(birthDate + 'T12:00:00').toISOString(),\n        lifeExpectancyYears: lifeExpectancy,\n        baseNetWorth: netWorth,\n        baseMonthlyIncome: income,\n        baseMonthlyExpenses: expenses,\n        monthlyContribution: derivedContribution,\n        expectedReturnYearly: returnYearly,\n        inflationYearly,\n        inflateIncome,\n        inflateExpenses,\n        retirementAge,\n        retirementMonthlyIncome,\n        inflateRetirementIncome,\n        baseCurrency: currency,\n      })\n      sid = result.scenarioId\n      setScenarioId(sid)\n    }\n    setEventSaving(true)\n    try {\n      const { id } = await saveLifeEvent(authUserId, sid, payload)\n      setEvents(prev => [\n        ...prev,\n        {\n          id,\n          type: payload.type,\n          title: payload.title,\n          date: new Date(payload.date),\n          endDate: payload.endDate ? new Date(payload.endDate) : undefined,\n          amount: payload.amount,\n          frequency: payload.frequency,\n          durationMonths: payload.durationMonths,\n          inflationIndexed: payload.inflationIndexed,\n        },\n      ])\n      setShowEventForm(false)\n    } finally {\n      setEventSaving(false)\n    }\n  }\n\n  async function handleDeleteEvent(id: string) {\n    if (!authUserId) return\n    await deleteLifeEvent(authUserId, id)\n    setEvents(prev => prev.filter(e => e.id !== id))\n  }\n\n  async function handleAddMicroPlan(payload: {\n    effectiveDate: string\n    monthlyIncome: number\n    monthlyExpenses: number\n    monthlyContribution: number\n  }) {\n    if (!authUserId || !scenarioId) return\n    setMicroPlanSaving(true)\n    try {\n      const { id } = await saveLifeMicroPlan(authUserId, scenarioId, payload)\n      setMicroPlans(prev => [\n        ...prev,\n        {\n          id,\n          effectiveDate: payload.effectiveDate,\n          monthlyIncome: payload.monthlyIncome,\n          monthlyExpenses: payload.monthlyExpenses,\n          monthlyContribution: payload.monthlyContribution,\n        },\n      ])\n      setShowMicroPlanForm(false)\n    } finally {\n      setMicroPlanSaving(false)\n    }\n  }\n\n  async function handleDeleteMicroPlan(id: string) {\n    if (!authUserId) return\n    await deleteLifeMicroPlan(authUserId, id)\n    setMicroPlans(prev => prev.filter(m => m.id !== id))\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-background text-muted-foreground\">\n        Carregando seu planejamento...\n      </div>\n    )\n  }\n\n  if (!hasPlan) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"px-4 pt-8 text-center\">\n          <h1 className=\"text-2xl font-semibold text-foreground\">\n            Seu plano de vida\n          </h1>\n          <p className=\"mt-2 text-sm text-muted-foreground\">\n            Responda algumas perguntas para criarmos seu cenário inicial.\n          </p>\n        </div>\n        <SetupWizard\n          onComplete={handleSetupComplete}\n          isLoading={setupSaving}\n        />\n      </div>\n    )\n  }\n\n  function focusSection(key: SidebarKey) {\n    const navOnly = key === 'projecao' || key === 'insights' || key === 'tabela'\n    if (!navOnly) setSectionOpen(prev => ({ ...prev, [key]: true }))\n    setSidebarOpen(false)\n    setTimeout(() => sectionRefs.current[key]?.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {sidebarOpen && (\n        <EditSidebar\n          onSelect={focusSection}\n          isOverlay\n          onCloseOverlay={() => setSidebarOpen(false)}\n        />\n      )}\n      <div className=\"flex gap-6 px-4 py-6\">\n        <div className=\"hidden w-fit shrink-0 overflow-hidden md:block\">\n          <div className=\"sticky top-6\">\n            <EditSidebar onSelect={focusSection} />\n          </div>\n        </div>\n        <CurrencyProvider currency={currency} setCurrency={setCurrency}>\n        <div className=\"min-w-0 flex-1\">\n          <div className=\"mx-auto flex max-w-5xl flex-col gap-6\">\n            <header className=\"flex flex-wrap items-center justify-between gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"shrink-0 md:hidden\"\n                  onClick={() => setSidebarOpen(o => !o)}\n                  aria-label=\"Abrir menu\"\n                >\n                  <span className=\"text-sm\">{sidebarOpen ? '✕' : '☰'}</span>\n                </Button>\n                <div>\n                  <h1 className=\"text-2xl font-semibold tracking-tight text-foreground\">\n                    Seu plano de vida\n                  </h1>\n                  <p className=\"mt-1 text-sm text-muted-foreground\">\n                    Projeção patrimonial. Use a sidebar para navegar ou editar dados.\n                  </p>\n                </div>\n              </div>\n            </header>\n\n        {/* Gráfico sempre visível no topo */}\n        <div ref={el => { sectionRefs.current.projecao = el }} className=\"scroll-mt-24\">\n        <Card className=\"border-l-4 border-l-[hsl(var(--chart-1))]\">\n          <CardHeader className=\"pb-2\">\n            <div className=\"flex flex-wrap items-center justify-between gap-3\">\n              <div>\n                <CardTitle className=\"text-base\">Projeção patrimonial</CardTitle>\n                <CardDescription>Evolução ao longo do tempo — use os filtros para alterar o período</CardDescription>\n              </div>\n              <ChartRangeFilter value={chartRange} onChange={setChartRange} />\n            </div>\n          </CardHeader>\n          <CardContent>\n            <LifeTimelineChart data={filteredMonthly} />\n          </CardContent>\n        </Card>\n        </div>\n\n        <div ref={el => { sectionRefs.current.insights = el }} className=\"scroll-mt-24\">\n        <LifeInsightsCard insights={insights} />\n        </div>\n\n        <div ref={el => { sectionRefs.current.tabela = el }} className=\"scroll-mt-24\">\n        <Card className=\"border-l-4 border-l-[hsl(var(--chart-2))]\">\n          <CardHeader>\n            <CardTitle className=\"text-base\">Tabela anual</CardTitle>\n            <CardDescription>Resumo no período selecionado</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <LifeProjectionTable\n              yearlyData={filteredYearly}\n              monthlyData={projection.monthly}\n            />\n          </CardContent>\n        </Card>\n        </div>\n\n        {/* Seções colapsáveis para edição de dados */}\n        <div ref={el => { sectionRefs.current.you = el }} className=\"scroll-mt-24\">\n          <CollapsibleCard\n            title=\"Você hoje\"\n            description=\"Dados atuais para a projeção — salvamento automático após pausa na edição\"\n            open={sectionOpen.you}\n            onOpenChange={o => setSectionOpen(prev => ({ ...prev, you: o }))}\n          >\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"birthDate\" className=\"text-muted-foreground\">Data de nascimento</Label>\n              <Input\n                id=\"birthDate\"\n                type=\"date\"\n                value={birthDate}\n                onChange={e => setBirthDate(e.target.value)}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"lifeExp\" className=\"text-muted-foreground\">Expectativa de vida</Label>\n              <Input\n                id=\"lifeExp\"\n                type=\"number\"\n                min={60}\n                max={110}\n                value={lifeExpectancy}\n                onChange={e => setLifeExpectancy(Number(e.target.value) || 0)}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"netWorth\" className=\"text-muted-foreground\">Patrimônio atual (R$)</Label>\n              <Input\n                id=\"netWorth\"\n                type=\"number\"\n                value={netWorth}\n                onChange={e => setNetWorth(Number(e.target.value) || 0)}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"income\" className=\"text-muted-foreground\">Renda mensal (R$)</Label>\n              <Input\n                id=\"income\"\n                type=\"number\"\n                value={income}\n                onChange={e => setIncome(Number(e.target.value) || 0)}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"expenses\" className=\"text-muted-foreground\">Gastos mensais (R$)</Label>\n              <Input\n                id=\"expenses\"\n                type=\"number\"\n                value={expenses}\n                onChange={e => setExpenses(Number(e.target.value) || 0)}\n              />\n            </div>\n          </div>\n          <p className=\"mt-2 text-xs text-muted-foreground\">\n            O aporte é calculado automaticamente como renda − gastos.\n          </p>\n        </CollapsibleCard>\n        </div>\n\n        <div ref={el => { sectionRefs.current.aposentadoria = el }} className=\"scroll-mt-24\">\n          <CollapsibleCard\n            title=\"Aposentadoria\"\n            description=\"Idade e renda a partir da aposentadoria — salvamento automático após pausa na edição\"\n            open={sectionOpen.aposentadoria}\n            onOpenChange={o => setSectionOpen(prev => ({ ...prev, aposentadoria: o }))}\n          >\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"retirementAge\">Idade de aposentadoria</Label>\n              <Input\n                id=\"retirementAge\"\n                type=\"number\"\n                min={40}\n                max={90}\n                value={retirementAge}\n                onChange={e => setRetirementAge(Number(e.target.value) || 65)}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"retirementMonthlyIncome\">Renda mensal (R$)</Label>\n              <Input\n                id=\"retirementMonthlyIncome\"\n                type=\"number\"\n                min={0}\n                value={retirementMonthlyIncome}\n                onChange={e => setRetirementMonthlyIncome(Number(e.target.value) || 0)}\n                placeholder=\"Ex: 8000\"\n              />\n            </div>\n          </div>\n          <label className=\"mt-3 flex items-center gap-2 text-sm\">\n            <input\n              type=\"checkbox\"\n              checked={inflateRetirementIncome}\n              onChange={e => setInflateRetirementIncome(e.target.checked)}\n              className=\"h-4 w-4 rounded border-input\"\n            />\n            <span>Inflacionar renda de aposentadoria</span>\n          </label>\n        </CollapsibleCard>\n        </div>\n\n        <div ref={el => { sectionRefs.current.microPlans = el }} className=\"scroll-mt-24\">\n          <CollapsibleCard\n          title=\"Micro planos\"\n          description=\"A partir de uma data: outra renda, gastos e aporte\"\n          open={sectionOpen.microPlans}\n          onOpenChange={o => setSectionOpen(prev => ({ ...prev, microPlans: o }))}\n          headerAction={\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowMicroPlanForm(p => !p)}\n              disabled={!scenarioId}\n            >\n              {showMicroPlanForm ? 'Ocultar' : '+ Adicionar'}\n            </Button>\n          }\n        >\n          {showMicroPlanForm && (\n            <div className=\"mb-4\">\n              <LifeMicroPlanForm\n                onSubmit={handleAddMicroPlan}\n                onCancel={() => setShowMicroPlanForm(false)}\n              />\n            </div>\n          )}\n          <LifeMicroPlansList microPlans={microPlans} onDelete={handleDeleteMicroPlan} />\n        </CollapsibleCard>\n        </div>\n\n        <div ref={el => { sectionRefs.current.events = el }} className=\"scroll-mt-24\">\n          <CollapsibleCard\n          title=\"Eventos de vida\"\n          description=\"Mudanças de renda, gastos e marcos\"\n          open={sectionOpen.events}\n          onOpenChange={o => setSectionOpen(prev => ({ ...prev, events: o }))}\n          headerAction={\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowEventForm(p => !p)}\n            >\n              {showEventForm ? 'Ocultar' : '+ Adicionar evento'}\n            </Button>\n          }\n        >\n          {showEventForm && (\n            <div className=\"mb-4\">\n              <LifeEventForm\n                onSubmit={handleAddEvent}\n                onCancel={() => setShowEventForm(false)}\n              />\n            </div>\n          )}\n          <LifeEventsList events={events} onDelete={handleDeleteEvent} />\n        </CollapsibleCard>\n        </div>\n\n        <div ref={el => { sectionRefs.current.configuracoes = el }} className=\"scroll-mt-24\">\n          <CollapsibleCard\n            title=\"Configurações\"\n            description=\"Moeda, retorno, inflação e indexação — salvamento automático após pausa na edição\"\n            open={sectionOpen.configuracoes}\n            onOpenChange={o => setSectionOpen(prev => ({ ...prev, configuracoes: o }))}\n          >\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"theme\" className=\"text-sm font-medium text-muted-foreground\">Aparência</Label>\n              <select\n                id=\"theme\"\n                value={theme}\n                onChange={e => setTheme(e.target.value as ThemeMode)}\n                className=\"mt-1.5 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n              >\n                <option value=\"light\">Modo claro</option>\n                <option value=\"dark\">Modo escuro</option>\n                <option value=\"system\">Seguir sistema</option>\n              </select>\n            </div>\n            <div>\n              <Label htmlFor=\"currency\" className=\"text-sm font-medium text-muted-foreground\">Moeda</Label>\n              <select\n                id=\"currency\"\n                value={currency}\n                onChange={e => setCurrency(e.target.value as CurrencyCode)}\n                className=\"mt-1.5 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\"\n              >\n                {CURRENCIES.map(c => (\n                  <option key={c.code} value={c.code}>{c.name}</option>\n                ))}\n              </select>\n            </div>\n            <div>\n              <p className=\"mb-2 text-sm font-medium text-muted-foreground\">Retorno e inflação</p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"returnYearly\">Retorno anual (%)</Label>\n                  <Input\n                    id=\"returnYearly\"\n                    type=\"number\"\n                    value={returnYearly}\n                    onChange={e => setReturnYearly(Number(e.target.value) || 0)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"inflationYearly\">Inflação anual (%)</Label>\n                  <Input\n                    id=\"inflationYearly\"\n                    type=\"number\"\n                    value={inflationYearly}\n                    onChange={e => setInflationYearly(Number(e.target.value) || 0)}\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"rounded-lg border border-border/50 bg-muted/20 p-3\">\n              <p className=\"mb-2 text-sm font-medium text-muted-foreground\">Indexação</p>\n              <div className=\"flex flex-wrap gap-4\">\n                <label className=\"flex items-center gap-2 text-sm\">\n                  <input\n                    type=\"checkbox\"\n                    checked={inflateIncome}\n                    onChange={e => setInflateIncome(e.target.checked)}\n                    className=\"h-4 w-4 rounded border-input\"\n                  />\n                  <span>Inflacionar renda</span>\n                </label>\n                <label className=\"flex items-center gap-2 text-sm\">\n                  <input\n                    type=\"checkbox\"\n                    checked={inflateExpenses}\n                    onChange={e => setInflateExpenses(e.target.checked)}\n                    className=\"h-4 w-4 rounded border-input\"\n                  />\n                  <span>Inflacionar gastos</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </CollapsibleCard>\n        </div>\n          </div>\n        </div>\n        </CurrencyProvider>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}