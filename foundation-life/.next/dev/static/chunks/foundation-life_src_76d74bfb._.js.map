{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst url = process.env.NEXT_PUBLIC_LIFE_SUPABASE_URL\nconst anonKey = process.env.NEXT_PUBLIC_LIFE_SUPABASE_ANON_KEY\n\nif (!url || !anonKey) {\n  console.warn('⚠️ Supabase env vars for Foundation Life are not set.')\n}\n\nexport const supabase = createClient(url ?? '', anonKey ?? '')\n\n"],"names":[],"mappings":";;;;AAEY;AAFZ;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,uNAAY,EAAC,OAAO,IAAI,WAAW"}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/lib/life-defaults.ts"],"sourcesContent":["/**\n * Default values for the life plan (setup inicial).\n * Retorno anual 6%; inflação IPCA+5%.\n */\nfunction getDefaultBirthDate(): string {\n  const d = new Date()\n  d.setFullYear(d.getFullYear() - 30)\n  return d.toISOString().slice(0, 10) // YYYY-MM-DD\n}\n\nexport const LIFE_PLAN_DEFAULTS = {\n  getDefaultBirthDate,\n  lifeExpectancyYears: 90,\n  baseNetWorth: 0,\n  baseMonthlyIncome: 8000,\n  baseMonthlyExpenses: 5000,\n  monthlyContribution: 1500,\n  expectedReturnYearly: 6,\n  inflationYearly: 5,\n  inflationLabel: 'IPCA+5',\n  inflateIncome: true,\n  inflateExpenses: true,\n  retirementAge: 65,\n  retirementMonthlyIncome: 0,\n  inflateRetirementIncome: true,\n} as const\n\nexport type LifePlanDefaults = typeof LIFE_PLAN_DEFAULTS\n"],"names":[],"mappings":";;;;AAAA;;;CAGC,GACD,SAAS;IACP,MAAM,IAAI,IAAI;IACd,EAAE,WAAW,CAAC,EAAE,WAAW,KAAK;IAChC,OAAO,EAAE,WAAW,GAAG,KAAK,CAAC,GAAG,IAAI,aAAa;;AACnD;AAEO,MAAM,qBAAqB;IAChC;IACA,qBAAqB;IACrB,cAAc;IACd,mBAAmB;IACnB,qBAAqB;IACrB,qBAAqB;IACrB,sBAAsB;IACtB,iBAAiB;IACjB,gBAAgB;IAChB,eAAe;IACf,iBAAiB;IACjB,eAAe;IACf,yBAAyB;IACzB,yBAAyB;AAC3B"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,sKAAI,EAAC;AACtB"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-transparent hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        xl: 'h-12 rounded-lg px-8 text-base',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : 'button'\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,8SACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aAAa;YACb,SAAS;YACT,WAAW;YACX,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,iMAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAC9B,qBACE,mNAAC;QACC,WAAW,IAAA,kJAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = 'Input'\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,iMAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,mNAAC;QACC,MAAM;QACN,WAAW,IAAA,kJAAE,EACX,gWACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/label.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nexport interface LabelProps extends React.LabelHTMLAttributes<HTMLLabelElement> {}\n\nconst Label = React.forwardRef<HTMLLabelElement, LabelProps>(\n  ({ className, ...props }, ref) => (\n    <label\n      ref={ref}\n      className={cn(\n        'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n        className\n      )}\n      {...props}\n    />\n  )\n)\nLabel.displayName = 'Label'\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIA,MAAM,sBAAQ,iMAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EACX,8FACA;QAED,GAAG,KAAK;;;;;;;AAIf,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\nimport { cn } from '@/lib/utils'\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      'rounded-lg border bg-card text-card-foreground shadow-sm',\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = 'Card'\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex flex-col space-y-1.5 p-6', className)}\n    {...props}\n  />\n))\nCardHeader.displayName = 'CardHeader'\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      'text-2xl font-semibold leading-none tracking-tight',\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = 'CardTitle'\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn('text-sm text-muted-foreground', className)}\n    {...props}\n  />\n))\nCardDescription.displayName = 'CardDescription'\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n))\nCardContent.displayName = 'CardContent'\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('flex items-center p-6 pt-0', className)}\n    {...props}\n  />\n))\nCardFooter.displayName = 'CardFooter'\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,iMAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EACX,4DACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,iMAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,iMAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,iMAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,iMAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QAAI,KAAK;QAAK,WAAW,IAAA,kJAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,iMAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,mNAAC;QACC,KAAK;QACL,WAAW,IAAA,kJAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/onboarding/components/setup-wizard.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { LIFE_PLAN_DEFAULTS } from '@/lib/life-defaults'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\n\nexport interface SetupWizardPayload {\n  birthDate: string\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nconst STEPS = [\n  {\n    key: 'birthDate',\n    label: 'Qual sua data de nascimento?',\n    type: 'date' as const,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.getDefaultBirthDate(),\n  },\n  {\n    key: 'lifeExpectancy',\n    label: 'Até quantos anos você quer planejar?',\n    placeholder: 'Ex: 90',\n    min: 60,\n    max: 110,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.lifeExpectancyYears,\n  },\n  {\n    key: 'baseNetWorth',\n    label: 'Qual seu patrimônio atual? (R$)',\n    placeholder: '0',\n    min: 0,\n    step: 1000,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.baseNetWorth,\n  },\n  {\n    key: 'baseMonthlyIncome',\n    label: 'Qual sua renda líquida mensal? (R$)',\n    placeholder: 'Ex: 8000',\n    min: 0,\n    step: 500,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.baseMonthlyIncome,\n  },\n  {\n    key: 'baseMonthlyExpenses',\n    label: 'Quanto você gasta por mês, em média? (R$)',\n    placeholder: 'Ex: 5000',\n    min: 0,\n    step: 500,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.baseMonthlyExpenses,\n  },\n  {\n    key: 'monthlyContribution',\n    label: 'Quanto você consegue investir por mês? (R$)',\n    placeholder: 'Ex: 1500',\n    min: 0,\n    step: 100,\n    toValue: (v: number) => v,\n    fromPayload: () => LIFE_PLAN_DEFAULTS.monthlyContribution,\n  },\n] as const\n\ninterface SetupWizardProps {\n  onComplete: (payload: SetupWizardPayload) => void\n  isLoading?: boolean\n}\n\nexport function SetupWizard({ onComplete, isLoading }: SetupWizardProps) {\n  const [step, setStep] = useState(0)\n  const [values, setValues] = useState<Record<string, number | string>>(() => {\n    const initial: Record<string, number | string> = {}\n    STEPS.forEach(s => {\n      initial[s.key] = s.fromPayload()\n    })\n    return initial\n  })\n\n  const current = STEPS[step]\n  const value = values[current.key] ?? current.fromPayload()\n  const isDateStep = 'type' in current && current.type === 'date'\n  const isLast = step === STEPS.length - 1\n  const progress = ((step + 1) / STEPS.length) * 100\n\n  function handleNext() {\n    if (isLast) {\n      const birthDateRaw = values.birthDate ?? LIFE_PLAN_DEFAULTS.getDefaultBirthDate()\n      const birthDateStr = typeof birthDateRaw === 'string' ? birthDateRaw : LIFE_PLAN_DEFAULTS.getDefaultBirthDate()\n      onComplete({\n        birthDate: new Date(birthDateStr + 'T12:00:00').toISOString(),\n        lifeExpectancyYears: (values.lifeExpectancy as number) ?? LIFE_PLAN_DEFAULTS.lifeExpectancyYears,\n        baseNetWorth: (values.baseNetWorth as number) ?? LIFE_PLAN_DEFAULTS.baseNetWorth,\n        baseMonthlyIncome: (values.baseMonthlyIncome as number) ?? LIFE_PLAN_DEFAULTS.baseMonthlyIncome,\n        baseMonthlyExpenses: (values.baseMonthlyExpenses as number) ?? LIFE_PLAN_DEFAULTS.baseMonthlyExpenses,\n        monthlyContribution: (values.monthlyContribution as number) ?? LIFE_PLAN_DEFAULTS.monthlyContribution,\n        expectedReturnYearly: LIFE_PLAN_DEFAULTS.expectedReturnYearly,\n        inflationYearly: LIFE_PLAN_DEFAULTS.inflationYearly,\n        inflateIncome: LIFE_PLAN_DEFAULTS.inflateIncome,\n        inflateExpenses: LIFE_PLAN_DEFAULTS.inflateExpenses,\n        retirementAge: LIFE_PLAN_DEFAULTS.retirementAge,\n        retirementMonthlyIncome: LIFE_PLAN_DEFAULTS.retirementMonthlyIncome,\n        inflateRetirementIncome: LIFE_PLAN_DEFAULTS.inflateRetirementIncome,\n      })\n    } else {\n      setStep(s => s + 1)\n    }\n  }\n\n  function handleBack() {\n    if (step > 0) setStep(s => s - 1)\n  }\n\n  return (\n    <div className=\"mx-auto flex min-h-[60vh] max-w-md flex-col justify-center px-4 py-8\">\n      <Card className=\"border-border/50 bg-card/50 backdrop-blur-sm\">\n        <CardHeader className=\"space-y-1 pb-4\">\n          <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n            <span>Passo {step + 1} de {STEPS.length}</span>\n          </div>\n          <div className=\"h-2 w-full overflow-hidden rounded-full bg-secondary\">\n            <div\n              className=\"h-full rounded-full bg-primary transition-all duration-300 ease-out\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"wizard-input\" className=\"text-base font-medium\">\n              {current.label}\n            </Label>\n            {isDateStep ? (\n              <Input\n                id=\"wizard-input\"\n                type=\"date\"\n                value={typeof value === 'string' ? value : ''}\n                onChange={e => setValues(prev => ({ ...prev, [current.key]: e.target.value }))}\n                onKeyDown={e => e.key === 'Enter' && handleNext()}\n                className=\"h-12 text-base\"\n                autoFocus\n              />\n            ) : (\n              <Input\n                id=\"wizard-input\"\n                type=\"number\"\n                min={'min' in current ? current.min : undefined}\n                max={'max' in current ? current.max : undefined}\n                step={'step' in current ? current.step : 1}\n                value={typeof value === 'number' ? value : Number(value) || 0}\n                onChange={e => setValues(prev => ({ ...prev, [current.key]: Number(e.target.value) || 0 }))}\n                onKeyDown={e => e.key === 'Enter' && handleNext()}\n                placeholder={'placeholder' in current ? current.placeholder : undefined}\n                className=\"h-12 text-base\"\n                autoFocus\n              />\n            )}\n          </div>\n\n          <div className=\"flex gap-3 pt-2\">\n            {step > 0 && (\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={handleBack}\n                className=\"shrink-0\"\n              >\n                Voltar\n              </Button>\n            )}\n            <Button\n              type=\"button\"\n              onClick={handleNext}\n              disabled={isLoading}\n              className=\"min-w-[140px] flex-1\"\n            >\n              {isLoading ? 'Criando...' : isLast ? 'Criar meu plano' : 'Continuar'}\n            </Button>\n          </div>\n\n          <p className=\"text-center text-xs text-muted-foreground\">\n            Premissas: retorno {LIFE_PLAN_DEFAULTS.expectedReturnYearly}% a.a. · Inflação {LIFE_PLAN_DEFAULTS.inflationLabel}\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-timeline-chart.tsx"],"sourcesContent":["'use client'\n\nimport {\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n} from 'recharts'\nimport type { LifeMonthlyPoint } from '@/modules/core/domain/life-types'\n\ninterface LifeTimelineChartProps {\n  data: LifeMonthlyPoint[]\n}\n\nexport function LifeTimelineChart({ data }: LifeTimelineChartProps) {\n  const yearlyPoints = data.filter(point => point.date.getMonth() === 0)\n\n  const chartData = yearlyPoints.map(point => ({\n    year: point.date.getFullYear(),\n    netWorth: Math.round(point.netWorth),\n    realNetWorth: Math.round(point.realNetWorth),\n  }))\n\n  if (chartData.length === 0) {\n    return (\n      <div className=\"flex h-64 items-center justify-center rounded-2xl border border-slate-800 bg-slate-900/40 text-sm text-slate-500\">\n        Configure seus dados iniciais para ver a projeção patrimonial.\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"h-72 w-full rounded-2xl border border-slate-800 bg-slate-900/40 p-4\">\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <LineChart data={chartData}>\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#1f2937\" />\n          <XAxis\n            dataKey=\"year\"\n            stroke=\"#6b7280\"\n            tickLine={false}\n          />\n          <YAxis\n            stroke=\"#6b7280\"\n            tickLine={false}\n          />\n          <Tooltip\n            contentStyle={{\n              backgroundColor: '#020617',\n              borderRadius: 8,\n              border: '1px solid #1f2937',\n              fontSize: 12,\n            }}\n          />\n          <Line\n            type=\"monotone\"\n            dataKey=\"netWorth\"\n            stroke=\"#3b82f6\"\n            strokeWidth={2}\n            dot={false}\n            name=\"Patrimônio (nominal)\"\n          />\n          <Line\n            type=\"monotone\"\n            dataKey=\"realNetWorth\"\n            stroke=\"#22c55e\"\n            strokeWidth={2}\n            dot={false}\n            name=\"Patrimônio (real)\"\n          />\n        </LineChart>\n      </ResponsiveContainer>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAiBO,SAAS,kBAAkB,EAAE,IAAI,EAA0B;IAChE,MAAM,eAAe,KAAK,MAAM,CAAC,CAAA,QAAS,MAAM,IAAI,CAAC,QAAQ,OAAO;IAEpE,MAAM,YAAY,aAAa,GAAG,CAAC,CAAA,QAAS,CAAC;YAC3C,MAAM,MAAM,IAAI,CAAC,WAAW;YAC5B,UAAU,KAAK,KAAK,CAAC,MAAM,QAAQ;YACnC,cAAc,KAAK,KAAK,CAAC,MAAM,YAAY;QAC7C,CAAC;IAED,IAAI,UAAU,MAAM,KAAK,GAAG;QAC1B,qBACE,mNAAC;YAAI,WAAU;sBAAmH;;;;;;IAItI;IAEA,qBACE,mNAAC;QAAI,WAAU;kBACb,cAAA,mNAAC,mNAAmB;YAAC,OAAM;YAAO,QAAO;sBACvC,cAAA,mNAAC,2LAAS;gBAAC,MAAM;;kCACf,mNAAC,uMAAa;wBAAC,iBAAgB;wBAAM,QAAO;;;;;;kCAC5C,mNAAC,uLAAK;wBACJ,SAAQ;wBACR,QAAO;wBACP,UAAU;;;;;;kCAEZ,mNAAC,uLAAK;wBACJ,QAAO;wBACP,UAAU;;;;;;kCAEZ,mNAAC,2LAAO;wBACN,cAAc;4BACZ,iBAAiB;4BACjB,cAAc;4BACd,QAAQ;4BACR,UAAU;wBACZ;;;;;;kCAEF,mNAAC,qLAAI;wBACH,MAAK;wBACL,SAAQ;wBACR,QAAO;wBACP,aAAa;wBACb,KAAK;wBACL,MAAK;;;;;;kCAEP,mNAAC,qLAAI;wBACH,MAAK;wBACL,SAAQ;wBACR,QAAO;wBACP,aAAa;wBACb,KAAK;wBACL,MAAK;;;;;;;;;;;;;;;;;;;;;;AAMjB;KA3DgB"}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-projection-table.tsx"],"sourcesContent":["import type { LifeYearlyPoint } from '@/modules/core/domain/life-types'\n\ninterface LifeProjectionTableProps {\n  data: LifeYearlyPoint[]\n}\n\nexport function LifeProjectionTable({ data }: LifeProjectionTableProps) {\n  if (!data.length) {\n    return null\n  }\n\n  return (\n    <div className=\"mt-6 overflow-hidden rounded-2xl border border-slate-800 bg-slate-950/60\">\n      <table className=\"min-w-full divide-y divide-slate-800 text-sm\">\n        <thead className=\"bg-slate-900/80\">\n          <tr>\n            <th className=\"px-4 py-2 text-left text-xs font-medium uppercase tracking-wide text-slate-400\">\n              Ano\n            </th>\n            <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-slate-400\">\n              Idade\n            </th>\n            <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-slate-400\">\n              Renda anual\n            </th>\n            <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-slate-400\">\n              Gastos anuais\n            </th>\n            <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-slate-400\">\n              Aportes\n            </th>\n            <th className=\"px-4 py-2 text-right text-xs font-medium uppercase tracking-wide text-slate-400\">\n              Patrimônio final\n            </th>\n          </tr>\n        </thead>\n        <tbody className=\"divide-y divide-slate-900\">\n          {data.map(row => (\n            <tr key={row.year} className=\"hover:bg-slate-900/60\">\n              <td className=\"px-4 py-2 text-xs text-slate-200\">{row.year}</td>\n              <td className=\"px-4 py-2 text-right text-xs text-slate-300\">{row.age}</td>\n              <td className=\"px-4 py-2 text-right text-xs text-slate-300\">\n                {Math.round(row.income).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n              </td>\n              <td className=\"px-4 py-2 text-right text-xs text-slate-300\">\n                {Math.round(row.expenses).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n              </td>\n              <td className=\"px-4 py-2 text-right text-xs text-slate-300\">\n                {Math.round(row.contribution).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n              </td>\n              <td className=\"px-4 py-2 text-right text-xs text-slate-100\">\n                {Math.round(row.netWorth).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;;AAMO,SAAS,oBAAoB,EAAE,IAAI,EAA4B;IACpE,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,OAAO;IACT;IAEA,qBACE,mNAAC;QAAI,WAAU;kBACb,cAAA,mNAAC;YAAM,WAAU;;8BACf,mNAAC;oBAAM,WAAU;8BACf,cAAA,mNAAC;;0CACC,mNAAC;gCAAG,WAAU;0CAAiF;;;;;;0CAG/F,mNAAC;gCAAG,WAAU;0CAAkF;;;;;;0CAGhG,mNAAC;gCAAG,WAAU;0CAAkF;;;;;;0CAGhG,mNAAC;gCAAG,WAAU;0CAAkF;;;;;;0CAGhG,mNAAC;gCAAG,WAAU;0CAAkF;;;;;;0CAGhG,mNAAC;gCAAG,WAAU;0CAAkF;;;;;;;;;;;;;;;;;8BAKpG,mNAAC;oBAAM,WAAU;8BACd,KAAK,GAAG,CAAC,CAAA,oBACR,mNAAC;4BAAkB,WAAU;;8CAC3B,mNAAC;oCAAG,WAAU;8CAAoC,IAAI,IAAI;;;;;;8CAC1D,mNAAC;oCAAG,WAAU;8CAA+C,IAAI,GAAG;;;;;;8CACpE,mNAAC;oCAAG,WAAU;8CACX,KAAK,KAAK,CAAC,IAAI,MAAM,EAAE,cAAc,CAAC,SAAS;wCAAE,OAAO;wCAAY,UAAU;oCAAM;;;;;;8CAEvF,mNAAC;oCAAG,WAAU;8CACX,KAAK,KAAK,CAAC,IAAI,QAAQ,EAAE,cAAc,CAAC,SAAS;wCAAE,OAAO;wCAAY,UAAU;oCAAM;;;;;;8CAEzF,mNAAC;oCAAG,WAAU;8CACX,KAAK,KAAK,CAAC,IAAI,YAAY,EAAE,cAAc,CAAC,SAAS;wCAAE,OAAO;wCAAY,UAAU;oCAAM;;;;;;8CAE7F,mNAAC;oCAAG,WAAU;8CACX,KAAK,KAAK,CAAC,IAAI,QAAQ,EAAE,cAAc,CAAC,SAAS;wCAAE,OAAO;wCAAY,UAAU;oCAAM;;;;;;;2BAblF,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;AAqB7B;KArDgB"}},
    {"offset": {"line": 920, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/constants/event-types.ts"],"sourcesContent":["import type { LifeEventType } from '@/modules/core/domain/life-types'\n\n/** Rótulos alinhados ao Foundation Hub (eventIcons / goals-events). */\nexport const EVENT_TYPE_LABELS: Record<LifeEventType, string> = {\n  goal: 'Objetivo / Meta',\n  contribution: 'Aporte',\n  car: 'Carro',\n  house: 'Casa / Imóvel',\n  travel: 'Viagem',\n  accident: 'Imprevisto / Acidente',\n  renovation: 'Reforma',\n  other: 'Outro',\n}\n\n/** Tipos de evento no formulário. */\nexport const EVENT_TYPES: LifeEventType[] = [\n  'goal',\n  'contribution',\n  'car',\n  'house',\n  'travel',\n  'accident',\n  'renovation',\n  'other',\n]\n"],"names":[],"mappings":";;;;;;AAGO,MAAM,oBAAmD;IAC9D,MAAM;IACN,cAAc;IACd,KAAK;IACL,OAAO;IACP,QAAQ;IACR,UAAU;IACV,YAAY;IACZ,OAAO;AACT;AAGO,MAAM,cAA+B;IAC1C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 953, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-event-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { EVENT_TYPE_LABELS, EVENT_TYPES } from '../constants/event-types'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { cn } from '@/lib/utils'\n\ninterface LifeEventFormProps {\n  onSubmit: (event: {\n    type: LifeEventType\n    title: string\n    date: string\n    endDate?: string\n    amount: number\n    frequency: 'once' | 'monthly' | 'yearly'\n    durationMonths?: number\n    inflationIndexed: boolean\n  }) => void\n  onCancel?: () => void\n}\n\nconst selectClassName =\n  'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2'\n\nexport function LifeEventForm({ onSubmit, onCancel }: LifeEventFormProps) {\n  const [type, setType] = useState<LifeEventType>('contribution')\n  const [title, setTitle] = useState('')\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 10))\n  const [amount, setAmount] = useState(0)\n  const [frequency, setFrequency] = useState<'once' | 'monthly' | 'yearly'>('once')\n  const [inflationIndexed, setInflationIndexed] = useState(true)\n\n  function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    if (!title.trim()) return\n    onSubmit({\n      type,\n      title: title.trim(),\n      date: new Date(date).toISOString(),\n      amount: Number(amount) || 0,\n      frequency,\n      inflationIndexed,\n    })\n    setTitle('')\n    setAmount(0)\n    setDate(new Date().toISOString().slice(0, 10))\n  }\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-base\">Novo evento de vida</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label>Tipo</Label>\n              <select\n                value={type}\n                onChange={e => setType(e.target.value as LifeEventType)}\n                className={cn(selectClassName)}\n              >\n                {EVENT_TYPES.map(t => (\n                  <option key={t} value={t}>\n                    {EVENT_TYPE_LABELS[t]}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Título</Label>\n              <Input\n                value={title}\n                onChange={e => setTitle(e.target.value)}\n                placeholder=\"Ex: Promoção, Compra do carro\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Data</Label>\n              <Input type=\"date\" value={date} onChange={e => setDate(e.target.value)} />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Valor (R$)</Label>\n              <Input\n                type=\"number\"\n                step=\"0.01\"\n                value={amount || ''}\n                onChange={e => setAmount(Number(e.target.value))}\n                placeholder=\"0\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Frequência</Label>\n              <select\n                value={frequency}\n                onChange={e => setFrequency(e.target.value as 'once' | 'monthly' | 'yearly')}\n                className={cn(selectClassName)}\n              >\n                <option value=\"once\">Uma vez</option>\n                <option value=\"monthly\">Mensal</option>\n                <option value=\"yearly\">Anual</option>\n              </select>\n            </div>\n            <div className=\"flex items-center gap-2 pt-8 sm:col-span-2\">\n              <input\n                type=\"checkbox\"\n                id=\"inflation\"\n                checked={inflationIndexed}\n                onChange={e => setInflationIndexed(e.target.checked)}\n                className=\"h-4 w-4 rounded border-input\"\n              />\n              <Label htmlFor=\"inflation\" className=\"font-normal text-muted-foreground\">\n                Ajustar pela inflação\n              </Label>\n            </div>\n          </div>\n          <div className=\"flex gap-2 pt-2\">\n            <Button type=\"submit\" size=\"sm\">\n              Adicionar evento\n            </Button>\n            {onCancel && (\n              <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={onCancel}>\n                Cancelar\n              </Button>\n            )}\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1280, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/timeline/components/life-events-list.tsx"],"sourcesContent":["'use client'\n\nimport { EVENT_TYPE_LABELS } from '../constants/event-types'\nimport type { LifeEvent } from '@/modules/core/domain/life-types'\nimport { Button } from '@/components/ui/button'\n\ninterface LifeEventsListProps {\n  events: LifeEvent[]\n  onDelete: (id: string) => void\n}\n\nexport function LifeEventsList({ events, onDelete }: LifeEventsListProps) {\n  if (events.length === 0) {\n    return (\n      <p className=\"text-sm text-muted-foreground\">\n        Nenhum evento ainda. Adicione mudanças de renda, grandes compras, filhos, aposentadoria, etc.\n      </p>\n    )\n  }\n\n  return (\n    <ul className=\"space-y-2\">\n      {events.map(event => (\n        <li\n          key={event.id}\n          className=\"flex items-center justify-between gap-3 rounded-lg border border-border bg-muted/30 px-3 py-2\"\n        >\n          <div className=\"min-w-0 flex-1\">\n            <p className=\"truncate text-sm font-medium text-foreground\">\n              {event.title}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              {EVENT_TYPE_LABELS[event.type as keyof typeof EVENT_TYPE_LABELS] ?? event.type} · {new Date(event.date).toLocaleDateString('pt-BR')}\n              {event.frequency !== 'once' && ` · ${event.frequency}`}\n            </p>\n          </div>\n          <div className=\"flex shrink-0 items-center gap-2\">\n            <span className=\"text-sm text-muted-foreground\">\n              {event.amount >= 0\n                ? `+${event.amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}`\n                : event.amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}\n            </span>\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={() => onDelete(event.id)}\n              className=\"h-8 w-8 text-muted-foreground hover:text-destructive\"\n              aria-label=\"Excluir evento\"\n            >\n              ×\n            </Button>\n          </div>\n        </li>\n      ))}\n    </ul>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAWO,SAAS,eAAe,EAAE,MAAM,EAAE,QAAQ,EAAuB;IACtE,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,qBACE,mNAAC;YAAE,WAAU;sBAAgC;;;;;;IAIjD;IAEA,qBACE,mNAAC;QAAG,WAAU;kBACX,OAAO,GAAG,CAAC,CAAA,sBACV,mNAAC;gBAEC,WAAU;;kCAEV,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAE,WAAU;0CACV,MAAM,KAAK;;;;;;0CAEd,mNAAC;gCAAE,WAAU;;oCACV,uMAAiB,CAAC,MAAM,IAAI,CAAmC,IAAI,MAAM,IAAI;oCAAC;oCAAI,IAAI,KAAK,MAAM,IAAI,EAAE,kBAAkB,CAAC;oCAC1H,MAAM,SAAS,KAAK,UAAU,CAAC,GAAG,EAAE,MAAM,SAAS,EAAE;;;;;;;;;;;;;kCAG1D,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAK,WAAU;0CACb,MAAM,MAAM,IAAI,IACb,CAAC,CAAC,EAAE,MAAM,MAAM,CAAC,cAAc,CAAC,SAAS;oCAAE,OAAO;oCAAY,UAAU;gCAAM,IAAI,GAClF,MAAM,MAAM,CAAC,cAAc,CAAC,SAAS;oCAAE,OAAO;oCAAY,UAAU;gCAAM;;;;;;0CAEhF,mNAAC,qKAAM;gCACL,MAAK;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS,IAAM,SAAS,MAAM,EAAE;gCAChC,WAAU;gCACV,cAAW;0CACZ;;;;;;;;;;;;;eAzBE,MAAM,EAAE;;;;;;;;;;AAiCvB;KA9CgB"}},
    {"offset": {"line": 1395, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/core/utils/micro-plan-utils.ts"],"sourcesContent":["import type { LifeMicroPlan } from '../domain/life-types'\n\n/**\n * Returns the active micro plan for a given month: the latest micro plan whose\n * effectiveDate is on or before the start of the given month.\n * If none applies (all plans are in the future), returns null.\n */\nexport function getActiveMicroPlanForDate(\n  microPlans: LifeMicroPlan[],\n  targetDate: Date\n): LifeMicroPlan | null {\n  if (!microPlans?.length) return null\n\n  const targetYear = targetDate.getFullYear()\n  const targetMonth = targetDate.getMonth()\n\n  const sorted = [...microPlans].sort(\n    (a, b) =>\n      new Date(a.effectiveDate).getTime() - new Date(b.effectiveDate).getTime()\n  )\n\n  let active: LifeMicroPlan | null = null\n  for (const plan of sorted) {\n    const d = new Date(plan.effectiveDate)\n    const planYear = d.getFullYear()\n    const planMonth = d.getMonth()\n    if (planYear < targetYear || (planYear === targetYear && planMonth <= targetMonth)) {\n      active = plan\n    }\n  }\n  return active\n}\n"],"names":[],"mappings":";;;;AAOO,SAAS,0BACd,UAA2B,EAC3B,UAAgB;IAEhB,IAAI,CAAC,YAAY,QAAQ,OAAO;IAEhC,MAAM,aAAa,WAAW,WAAW;IACzC,MAAM,cAAc,WAAW,QAAQ;IAEvC,MAAM,SAAS;WAAI;KAAW,CAAC,IAAI,CACjC,CAAC,GAAG,IACF,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO;IAG3E,IAAI,SAA+B;IACnC,KAAK,MAAM,QAAQ,OAAQ;QACzB,MAAM,IAAI,IAAI,KAAK,KAAK,aAAa;QACrC,MAAM,WAAW,EAAE,WAAW;QAC9B,MAAM,YAAY,EAAE,QAAQ;QAC5B,IAAI,WAAW,cAAe,aAAa,cAAc,aAAa,aAAc;YAClF,SAAS;QACX;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 1424, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/core/services/projection-engine.ts"],"sourcesContent":["import {\n  LifeEvent,\n  LifeMonthlyPoint,\n  LifeYearlyPoint,\n  ProjectionParams,\n  ProjectionResult,\n} from '../domain/life-types'\nimport { getActiveMicroPlanForDate } from '../utils/micro-plan-utils'\n\nfunction yearlyToMonthlyRate(yearlyPercent: number): number {\n  const yearly = yearlyPercent / 100\n  if (yearly <= -1) return 0\n  return Math.pow(1 + yearly, 1 / 12) - 1\n}\n\nfunction getMonthsDiff(start: Date, end: Date): number {\n  return (end.getFullYear() - start.getFullYear()) * 12 + (end.getMonth() - start.getMonth())\n}\n\nfunction cloneDate(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate())\n}\n\ninterface MonthEventImpact {\n  income: number\n  expenses: number\n  extraIncome: number\n  extraExpenses: number\n  /** One-time outflow in this month (e.g. large purchase) — reduces net worth directly */\n  oneTimeOutflow: number\n  /** One-time inflow (e.g. sale of asset) — increases net worth directly */\n  oneTimeInflow: number\n}\n\nfunction applyEventsForMonth(baseIncome: number, baseExpenses: number, date: Date, events: LifeEvent[]): MonthEventImpact {\n  let income = baseIncome\n  let expenses = baseExpenses\n  let extraIncome = 0\n  let extraExpenses = 0\n  let oneTimeOutflow = 0\n  let oneTimeInflow = 0\n\n  for (const event of events) {\n    const eventMonthKey = event.date.getFullYear() * 12 + event.date.getMonth()\n    const currentMonthKey = date.getFullYear() * 12 + date.getMonth()\n\n    const isWithinDuration =\n      !event.endDate || (date >= event.date && date <= event.endDate)\n\n    if (!isWithinDuration) continue\n\n    const isIncome = event.type === 'contribution'\n    const amount = event.amount\n    const absAmount = Math.abs(amount)\n\n    if (event.frequency === 'once') {\n      if (currentMonthKey !== eventMonthKey) continue\n      if (isIncome) {\n        extraIncome += amount\n      } else {\n        oneTimeOutflow += absAmount\n        extraExpenses += absAmount\n      }\n    }\n\n    if (event.frequency === 'monthly') {\n      if (currentMonthKey < eventMonthKey) continue\n      if (isIncome) income += amount\n      else expenses += absAmount\n    }\n\n    if (event.frequency === 'yearly') {\n      if (date.getMonth() !== event.date.getMonth()) continue\n      if (date.getFullYear() < event.date.getFullYear()) continue\n      if (isIncome) extraIncome += amount\n      else extraExpenses += absAmount\n    }\n  }\n\n  return { income, expenses, extraIncome, extraExpenses, oneTimeOutflow, oneTimeInflow }\n}\n\nexport function buildLifeProjection(params: ProjectionParams): ProjectionResult {\n  const { profile, settings, events, microPlans = [] } = params\n\n  const monthlyReturnRate = yearlyToMonthlyRate(settings.expectedReturnYearly)\n  const monthlyInflationRate = yearlyToMonthlyRate(settings.inflationYearly)\n\n  const startDate = new Date()\n  const endDate = cloneDate(profile.birthDate)\n  endDate.setFullYear(endDate.getFullYear() + profile.lifeExpectancyYears)\n\n  const totalMonths = Math.max(0, getMonthsDiff(startDate, endDate))\n\n  let currentNetWorth = settings.baseNetWorth\n  let accumulatedInflation = 1\n  let firstMonthWithZeroOrNegativeNetWorth: number | null = null\n\n  const monthly: LifeMonthlyPoint[] = []\n\n  const retirementAge = settings.retirementAge ?? 65\n  const inflateIncome = settings.inflateIncome ?? true\n  const inflateExpenses = settings.inflateExpenses ?? true\n  const inflateRetirementIncome = settings.inflateRetirementIncome ?? true\n  const retirementMonthlyIncome = settings.retirementMonthlyIncome ?? 0\n\n  for (let i = 0; i <= totalMonths; i++) {\n    const currentDate = new Date(startDate.getFullYear(), startDate.getMonth() + i, 1)\n    const age =\n      currentDate.getFullYear() - profile.birthDate.getFullYear() -\n      (currentDate.getMonth() < profile.birthDate.getMonth() ? 1 : 0)\n\n    const activeMicro = getActiveMicroPlanForDate(microPlans, currentDate)\n    const baseIncomeForMonth = activeMicro\n      ? activeMicro.monthlyIncome\n      : (age < retirementAge ? settings.baseMonthlyIncome : retirementMonthlyIncome)\n    const baseExpensesForMonth = activeMicro ? activeMicro.monthlyExpenses : settings.baseMonthlyExpenses\n    const baseContributionForMonth = activeMicro ? activeMicro.monthlyContribution : settings.monthlyContribution\n    const inflateIncomeForMonth = age < retirementAge ? inflateIncome : inflateRetirementIncome\n    const nominalBaseIncome = inflateIncomeForMonth ? baseIncomeForMonth * accumulatedInflation : baseIncomeForMonth\n    const nominalBaseExpenses = inflateExpenses ? baseExpensesForMonth * accumulatedInflation : baseExpensesForMonth\n\n    const impact = applyEventsForMonth(\n      nominalBaseIncome,\n      nominalBaseExpenses,\n      currentDate,\n      events,\n    )\n\n    const monthIncome = impact.income + impact.extraIncome\n    const monthExpenses = impact.expenses + impact.extraExpenses\n    const availableForInvestments = Math.max(\n      0,\n      monthIncome - monthExpenses,\n    )\n    const contribution = Math.min(baseContributionForMonth, availableForInvestments)\n\n    // Apply one-time inflows/outflows (e.g. large purchase reduces patrimônio; sale adds)\n    currentNetWorth += impact.oneTimeInflow - impact.oneTimeOutflow\n    if (i >= 1 && currentNetWorth <= 0 && firstMonthWithZeroOrNegativeNetWorth === null) {\n      firstMonthWithZeroOrNegativeNetWorth = i\n    }\n    const preReturnNetWorth = currentNetWorth + contribution\n    const returns = preReturnNetWorth * monthlyReturnRate\n    currentNetWorth = preReturnNetWorth + returns\n    if (i >= 1 && currentNetWorth <= 0 && firstMonthWithZeroOrNegativeNetWorth === null) {\n      firstMonthWithZeroOrNegativeNetWorth = i\n    }\n\n    accumulatedInflation *= 1 + monthlyInflationRate\n    const realNetWorth = currentNetWorth / accumulatedInflation\n\n    monthly.push({\n      date: currentDate,\n      age,\n      netWorth: currentNetWorth,\n      realNetWorth,\n      income: monthIncome,\n      expenses: monthExpenses,\n      contribution,\n      returns,\n    })\n  }\n\n  const yearlyMap = new Map<number, LifeYearlyPoint>()\n\n  for (const point of monthly) {\n    const year = point.date.getFullYear()\n    const existing = yearlyMap.get(year)\n\n    if (!existing) {\n      yearlyMap.set(year, {\n        year,\n        age: point.age,\n        netWorth: point.netWorth,\n        realNetWorth: point.realNetWorth,\n        income: point.income * 12,\n        expenses: point.expenses * 12,\n        contribution: point.contribution * 12,\n        returns: point.returns * 12,\n      })\n    } else {\n      existing.netWorth = point.netWorth\n      existing.realNetWorth = point.realNetWorth\n      existing.income += point.income\n      existing.expenses += point.expenses\n      existing.contribution += point.contribution\n      existing.returns += point.returns\n    }\n  }\n\n  const yearly = Array.from(yearlyMap.values()).sort((a, b) => a.year - b.year)\n\n  return { monthly, yearly, firstMonthWithZeroOrNegativeNetWorth }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1580, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAkDsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,+CAAA"}},
    {"offset": {"line": 1597, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAoHsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,gDAAA"}},
    {"offset": {"line": 1614, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MA0LsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,iDAAA"}},
    {"offset": {"line": 1631, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAoNsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,mDAAA"}},
    {"offset": {"line": 1648, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MA8NsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,qDAAA"}},
    {"offset": {"line": 1665, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/app/actions/life.ts"],"sourcesContent":["'use server'\n\nimport { prisma } from '@/lib/prisma'\nimport type { LifeEventType } from '@/modules/core/domain/life-types'\n\nexport interface LifeDataPayload {\n  birthDate: string // ISO\n  lifeExpectancyYears: number\n  baseNetWorth: number\n  baseMonthlyIncome: number\n  baseMonthlyExpenses: number\n  monthlyContribution: number\n  expectedReturnYearly: number\n  inflationYearly: number\n  inflateIncome: boolean\n  inflateExpenses: boolean\n  retirementAge: number\n  retirementMonthlyIncome: number\n  inflateRetirementIncome: boolean\n}\n\nexport interface LifeEventPayload {\n  id?: string\n  type: LifeEventType\n  title: string\n  date: string // ISO\n  endDate?: string\n  amount: number\n  frequency: 'once' | 'monthly' | 'yearly'\n  durationMonths?: number\n  inflationIndexed?: boolean\n}\n\nexport interface LifeMicroPlanPayload {\n  effectiveDate: string // ISO date (YYYY-MM-DD or full ISO)\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\nexport interface LifeDataResult {\n  profileId: string\n  scenarioId: string\n  birthDate: string\n  lifeExpectancyYears: number\n  settings: LifeDataPayload\n  events: LifeEventPayload[]\n  microPlans: (LifeMicroPlanPayload & { id: string })[]\n}\n\nexport async function getLifeData(authUserId: string): Promise<LifeDataResult | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile?.birthDate) return null\n\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n    include: {\n      settings: true,\n      events: { orderBy: { date: 'asc' } },\n    },\n  })\n\n  if (!scenario?.settings) return null\n\n  const microPlans = await prisma.lifeMicroPlan.findMany({\n    where: { scenarioId: scenario.id },\n    orderBy: { effectiveDate: 'asc' },\n  })\n\n  const settings = scenario.settings\n  const birthDate = profile.birthDate\n\n  return {\n    profileId: profile.id,\n    scenarioId: scenario.id,\n    birthDate: birthDate.toISOString(),\n    lifeExpectancyYears: profile.lifeExpectancyYears,\n    settings: {\n      birthDate: birthDate.toISOString(),\n      lifeExpectancyYears: profile.lifeExpectancyYears,\n      baseNetWorth: settings.baseNetWorth,\n      baseMonthlyIncome: settings.baseMonthlyIncome,\n      baseMonthlyExpenses: settings.baseMonthlyExpenses,\n      monthlyContribution: settings.monthlyContribution,\n      expectedReturnYearly: settings.expectedReturnYearly,\n      inflationYearly: settings.inflationYearly,\n      inflateIncome: settings.inflateIncome ?? true,\n      inflateExpenses: settings.inflateExpenses ?? true,\n      retirementAge: settings.retirementAge ?? 65,\n      retirementMonthlyIncome: settings.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: settings.inflateRetirementIncome ?? true,\n    },\n    events: scenario.events.map(e => ({\n      id: e.id,\n      type: e.type as LifeEventType,\n      title: e.title,\n      date: e.date.toISOString(),\n      endDate: e.endDate?.toISOString(),\n      amount: e.amount,\n      frequency: e.frequency as 'once' | 'monthly' | 'yearly',\n      durationMonths: e.durationMonths ?? undefined,\n      inflationIndexed: e.inflationIndexed,\n    })),\n    microPlans: microPlans.map(m => ({\n      id: m.id,\n      effectiveDate: m.effectiveDate.toISOString().slice(0, 10),\n      monthlyIncome: m.monthlyIncome,\n      monthlyExpenses: m.monthlyExpenses,\n      monthlyContribution: m.monthlyContribution,\n    })),\n  }\n}\n\nexport async function saveLifeData(authUserId: string, payload: LifeDataPayload): Promise<{ scenarioId: string }> {\n  let profile = await prisma.profile.findUnique({\n    where: { authUserId },\n  })\n\n  if (!profile) {\n    profile = await prisma.profile.create({\n      data: {\n        authUserId,\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  } else {\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        birthDate: new Date(payload.birthDate),\n        lifeExpectancyYears: payload.lifeExpectancyYears,\n      },\n    })\n  }\n\n  let scenario = await prisma.lifeScenario.findFirst({\n    where: { profileId: profile.id, isDefault: true },\n  })\n  if (!scenario) {\n    scenario = await prisma.lifeScenario.create({\n      data: {\n        profileId: profile.id,\n        name: 'Plano principal',\n        isDefault: true,\n      },\n    })\n  }\n\n  await prisma.lifeSettings.upsert({\n    where: { scenarioId: scenario.id },\n    create: {\n      scenarioId: scenario.id,\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n    update: {\n      baseNetWorth: payload.baseNetWorth,\n      baseMonthlyIncome: payload.baseMonthlyIncome,\n      baseMonthlyExpenses: payload.baseMonthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n      expectedReturnYearly: payload.expectedReturnYearly,\n      inflationYearly: payload.inflationYearly,\n      inflateIncome: payload.inflateIncome ?? true,\n      inflateExpenses: payload.inflateExpenses ?? true,\n      retirementAge: payload.retirementAge ?? 65,\n      retirementMonthlyIncome: payload.retirementMonthlyIncome ?? 0,\n      inflateRetirementIncome: payload.inflateRetirementIncome ?? true,\n    },\n  })\n\n  return { scenarioId: scenario.id }\n}\n\nexport async function saveLifeEvent(\n  authUserId: string,\n  scenarioId: string,\n  payload: Omit<LifeEventPayload, 'id'>\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const event = await prisma.lifeEvent.create({\n    data: {\n      scenarioId,\n      type: payload.type,\n      title: payload.title,\n      date: new Date(payload.date),\n      endDate: payload.endDate ? new Date(payload.endDate) : null,\n      amount: payload.amount,\n      frequency: payload.frequency,\n      durationMonths: payload.durationMonths ?? null,\n      inflationIndexed: payload.inflationIndexed ?? true,\n    },\n  })\n  return { id: event.id }\n}\n\nexport async function deleteLifeEvent(authUserId: string, eventId: string): Promise<void> {\n  const profile = await prisma.profile.findUnique({ where: { authUserId } })\n  if (!profile) return\n\n  const event = await prisma.lifeEvent.findFirst({\n    where: { id: eventId, scenario: { profileId: profile.id } },\n  })\n  if (event) await prisma.lifeEvent.delete({ where: { id: eventId } })\n}\n\nexport async function saveLifeMicroPlan(\n  authUserId: string,\n  scenarioId: string,\n  payload: LifeMicroPlanPayload\n): Promise<{ id: string }> {\n  const scenario = await prisma.lifeScenario.findFirst({\n    where: { id: scenarioId, profile: { authUserId } },\n  })\n  if (!scenario) throw new Error('Scenario not found')\n\n  const microPlan = await prisma.lifeMicroPlan.create({\n    data: {\n      scenarioId,\n      effectiveDate: new Date(payload.effectiveDate + 'T12:00:00'),\n      monthlyIncome: payload.monthlyIncome,\n      monthlyExpenses: payload.monthlyExpenses,\n      monthlyContribution: payload.monthlyContribution,\n    },\n  })\n  return { id: microPlan.id }\n}\n\nexport async function updateLifeMicroPlan(\n  authUserId: string,\n  microPlanId: string,\n  payload: Partial<LifeMicroPlanPayload>\n): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (!microPlan) throw new Error('Micro plan not found')\n\n  await prisma.lifeMicroPlan.update({\n    where: { id: microPlanId },\n    data: {\n      ...(payload.effectiveDate != null && { effectiveDate: new Date(payload.effectiveDate + 'T12:00:00') }),\n      ...(payload.monthlyIncome != null && { monthlyIncome: payload.monthlyIncome }),\n      ...(payload.monthlyExpenses != null && { monthlyExpenses: payload.monthlyExpenses }),\n      ...(payload.monthlyContribution != null && { monthlyContribution: payload.monthlyContribution }),\n    },\n  })\n}\n\nexport async function deleteLifeMicroPlan(authUserId: string, microPlanId: string): Promise<void> {\n  const microPlan = await prisma.lifeMicroPlan.findFirst({\n    where: { id: microPlanId, scenario: { profile: { authUserId } } },\n  })\n  if (microPlan) {\n    await prisma.lifeMicroPlan.delete({ where: { id: microPlanId } })\n  }\n}\n"],"names":[],"mappings":";;;;;;;MAyQsB,wBAAA,WAAA,GAAA,IAAA,wQAAA,EAAA,8CAAA,6PAAA,EAAA,KAAA,GAAA,mQAAA,EAAA,uDAAA"}},
    {"offset": {"line": 1682, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/micro-plans/components/life-micro-plan-form.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\n\nexport interface LifeMicroPlanFormPayload {\n  effectiveDate: string\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\ninterface LifeMicroPlanFormProps {\n  onSubmit: (payload: LifeMicroPlanFormPayload) => void\n  onCancel?: () => void\n  defaultDate?: string\n}\n\nexport function LifeMicroPlanForm({\n  onSubmit,\n  onCancel,\n  defaultDate = new Date().toISOString().slice(0, 10),\n}: LifeMicroPlanFormProps) {\n  const [effectiveDate, setEffectiveDate] = useState(defaultDate)\n  const [monthlyIncome, setMonthlyIncome] = useState(0)\n  const [monthlyExpenses, setMonthlyExpenses] = useState(0)\n  const [monthlyContribution, setMonthlyContribution] = useState(0)\n\n  function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    onSubmit({\n      effectiveDate,\n      monthlyIncome,\n      monthlyExpenses,\n      monthlyContribution,\n    })\n  }\n\n  return (\n    <Card>\n      <CardHeader className=\"pb-3\">\n        <CardTitle className=\"text-base\">Novo micro plano</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid gap-4 sm:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <Label>A partir de (data)</Label>\n              <Input\n                type=\"date\"\n                value={effectiveDate}\n                onChange={e => setEffectiveDate(e.target.value)}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Renda mensal (R$)</Label>\n              <Input\n                type=\"number\"\n                min={0}\n                value={monthlyIncome || ''}\n                onChange={e => setMonthlyIncome(Number(e.target.value))}\n                placeholder=\"0\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Gastos mensais (R$)</Label>\n              <Input\n                type=\"number\"\n                min={0}\n                value={monthlyExpenses || ''}\n                onChange={e => setMonthlyExpenses(Number(e.target.value))}\n                placeholder=\"0\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label>Aporte mensal (R$)</Label>\n              <Input\n                type=\"number\"\n                min={0}\n                value={monthlyContribution || ''}\n                onChange={e => setMonthlyContribution(Number(e.target.value))}\n                placeholder=\"0\"\n              />\n            </div>\n          </div>\n          <div className=\"flex gap-2 pt-2\">\n            <Button type=\"submit\" size=\"sm\">\n              Adicionar\n            </Button>\n            {onCancel && (\n              <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={onCancel}>\n                Cancelar\n              </Button>\n            )}\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAqBO,SAAS,kBAAkB,EAChC,QAAQ,EACR,QAAQ,EACR,cAAc,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAG,GAAG,EAC5B;;IACvB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+LAAQ,EAAC;IACnD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,+LAAQ,EAAC;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+LAAQ,EAAC;IACvD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,+LAAQ,EAAC;IAE/D,SAAS,aAAa,CAAkB;QACtC,EAAE,cAAc;QAChB,SAAS;YACP;YACA;YACA;YACA;QACF;IACF;IAEA,qBACE,mNAAC,iKAAI;;0BACH,mNAAC,uKAAU;gBAAC,WAAU;0BACpB,cAAA,mNAAC,sKAAS;oBAAC,WAAU;8BAAY;;;;;;;;;;;0BAEnC,mNAAC,wKAAW;0BACV,cAAA,mNAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,mNAAC;4BAAI,WAAU;;8CACb,mNAAC;oCAAI,WAAU;;sDACb,mNAAC,mKAAK;sDAAC;;;;;;sDACP,mNAAC,mKAAK;4CACJ,MAAK;4CACL,OAAO;4CACP,UAAU,CAAA,IAAK,iBAAiB,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8CAGlD,mNAAC;oCAAI,WAAU;;sDACb,mNAAC,mKAAK;sDAAC;;;;;;sDACP,mNAAC,mKAAK;4CACJ,MAAK;4CACL,KAAK;4CACL,OAAO,iBAAiB;4CACxB,UAAU,CAAA,IAAK,iBAAiB,OAAO,EAAE,MAAM,CAAC,KAAK;4CACrD,aAAY;;;;;;;;;;;;8CAGhB,mNAAC;oCAAI,WAAU;;sDACb,mNAAC,mKAAK;sDAAC;;;;;;sDACP,mNAAC,mKAAK;4CACJ,MAAK;4CACL,KAAK;4CACL,OAAO,mBAAmB;4CAC1B,UAAU,CAAA,IAAK,mBAAmB,OAAO,EAAE,MAAM,CAAC,KAAK;4CACvD,aAAY;;;;;;;;;;;;8CAGhB,mNAAC;oCAAI,WAAU;;sDACb,mNAAC,mKAAK;sDAAC;;;;;;sDACP,mNAAC,mKAAK;4CACJ,MAAK;4CACL,KAAK;4CACL,OAAO,uBAAuB;4CAC9B,UAAU,CAAA,IAAK,uBAAuB,OAAO,EAAE,MAAM,CAAC,KAAK;4CAC3D,aAAY;;;;;;;;;;;;;;;;;;sCAIlB,mNAAC;4BAAI,WAAU;;8CACb,mNAAC,qKAAM;oCAAC,MAAK;oCAAS,MAAK;8CAAK;;;;;;gCAG/B,0BACC,mNAAC,qKAAM;oCAAC,MAAK;oCAAS,SAAQ;oCAAU,MAAK;oCAAK,SAAS;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASnF;GAjFgB;KAAA"}},
    {"offset": {"line": 1910, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/micro-plans/components/life-micro-plans-list.tsx"],"sourcesContent":["'use client'\n\nimport { Button } from '@/components/ui/button'\n\nexport interface LifeMicroPlanItem {\n  id: string\n  effectiveDate: string\n  monthlyIncome: number\n  monthlyExpenses: number\n  monthlyContribution: number\n}\n\ninterface LifeMicroPlansListProps {\n  microPlans: LifeMicroPlanItem[]\n  onDelete: (id: string) => void\n}\n\nfunction formatDate(isoDate: string): string {\n  return new Date(isoDate + 'T12:00:00').toLocaleDateString('pt-BR', {\n    month: 'short',\n    year: 'numeric',\n  })\n}\n\nfunction formatCurrency(value: number): string {\n  return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })\n}\n\nexport function LifeMicroPlansList({ microPlans, onDelete }: LifeMicroPlansListProps) {\n  if (microPlans.length === 0) {\n    return (\n      <p className=\"text-sm text-muted-foreground\">\n        Nenhum micro plano. Adicione para definir mudanças de renda, gastos e aporte a partir de uma data.\n      </p>\n    )\n  }\n\n  const sorted = [...microPlans].sort(\n    (a, b) => new Date(a.effectiveDate).getTime() - new Date(b.effectiveDate).getTime()\n  )\n\n  return (\n    <ul className=\"space-y-2\">\n      {sorted.map(plan => (\n        <li\n          key={plan.id}\n          className=\"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-border bg-muted/30 px-3 py-2\"\n        >\n          <div className=\"min-w-0 flex-1\">\n            <p className=\"text-sm font-medium text-foreground\">\n              A partir de {formatDate(plan.effectiveDate)}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Renda {formatCurrency(plan.monthlyIncome)} · Gastos {formatCurrency(plan.monthlyExpenses)} · Aporte {formatCurrency(plan.monthlyContribution)}\n            </p>\n          </div>\n          <Button\n            type=\"button\"\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => onDelete(plan.id)}\n            className=\"h-8 w-8 shrink-0 text-muted-foreground hover:text-destructive\"\n            aria-label=\"Excluir micro plano\"\n          >\n            ×\n          </Button>\n        </li>\n      ))}\n    </ul>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAiBA,SAAS,WAAW,OAAe;IACjC,OAAO,IAAI,KAAK,UAAU,aAAa,kBAAkB,CAAC,SAAS;QACjE,OAAO;QACP,MAAM;IACR;AACF;AAEA,SAAS,eAAe,KAAa;IACnC,OAAO,MAAM,cAAc,CAAC,SAAS;QAAE,OAAO;QAAY,UAAU;IAAM;AAC5E;AAEO,SAAS,mBAAmB,EAAE,UAAU,EAAE,QAAQ,EAA2B;IAClF,IAAI,WAAW,MAAM,KAAK,GAAG;QAC3B,qBACE,mNAAC;YAAE,WAAU;sBAAgC;;;;;;IAIjD;IAEA,MAAM,SAAS;WAAI;KAAW,CAAC,IAAI,CACjC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO;IAGnF,qBACE,mNAAC;QAAG,WAAU;kBACX,OAAO,GAAG,CAAC,CAAA,qBACV,mNAAC;gBAEC,WAAU;;kCAEV,mNAAC;wBAAI,WAAU;;0CACb,mNAAC;gCAAE,WAAU;;oCAAsC;oCACpC,WAAW,KAAK,aAAa;;;;;;;0CAE5C,mNAAC;gCAAE,WAAU;;oCAAgC;oCACpC,eAAe,KAAK,aAAa;oCAAE;oCAAW,eAAe,KAAK,eAAe;oCAAE;oCAAW,eAAe,KAAK,mBAAmB;;;;;;;;;;;;;kCAGhJ,mNAAC,qKAAM;wBACL,MAAK;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,SAAS,KAAK,EAAE;wBAC/B,WAAU;wBACV,cAAW;kCACZ;;;;;;;eAlBI,KAAK,EAAE;;;;;;;;;;AAyBtB;KA1CgB"}},
    {"offset": {"line": 2020, "column": 0}, "map": {"version":3,"sources":["file:///Users/gustavonoll/Documents/projects/advanced-finance-planner/foundation-life/src/modules/dashboard/components/life-dashboard.tsx"],"sourcesContent":["'use client'\n\nimport { useMemo, useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { supabase } from '@/lib/supabase'\nimport { LIFE_PLAN_DEFAULTS } from '@/lib/life-defaults'\nimport { SetupWizard } from '@/modules/onboarding/components/setup-wizard'\nimport { LifeTimelineChart } from '@/modules/timeline/components/life-timeline-chart'\nimport { LifeProjectionTable } from '@/modules/timeline/components/life-projection-table'\nimport { LifeEventForm } from '@/modules/timeline/components/life-event-form'\nimport { LifeEventsList } from '@/modules/timeline/components/life-events-list'\nimport { buildLifeProjection } from '@/modules/core/services/projection-engine'\nimport type { LifeEvent, LifeEventType } from '@/modules/core/domain/life-types'\nimport {\n  getLifeData,\n  saveLifeData,\n  saveLifeEvent,\n  deleteLifeEvent,\n  saveLifeMicroPlan,\n  deleteLifeMicroPlan,\n} from '@/app/actions/life'\nimport { LifeMicroPlanForm } from '@/modules/micro-plans/components/life-micro-plan-form'\nimport { LifeMicroPlansList } from '@/modules/micro-plans/components/life-micro-plans-list'\nimport type { LifeMicroPlan } from '@/modules/core/domain/life-types'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card'\nimport { CollapsibleCard } from '@/components/ui/collapsible-card'\nimport {\n  ChartRangeFilter,\n  getChartRange,\n  getDefaultChartRangeState,\n  filterMonthlyByRange,\n  filterYearlyByRange,\n  type ChartRangeFilterState,\n} from '@/modules/timeline/components/chart-range-filter'\n\nexport function LifeDashboard() {\n  const router = useRouter()\n  const [authUserId, setAuthUserId] = useState<string | null>(null)\n  const [scenarioId, setScenarioId] = useState<string | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n  const [setupSaving, setSetupSaving] = useState(false)\n  const [eventSaving, setEventSaving] = useState(false)\n  const [hasPlan, setHasPlan] = useState(false)\n\n  const [birthDate, setBirthDate] = useState(() => {\n    const d = new Date()\n    d.setFullYear(d.getFullYear() - 30)\n    return d.toISOString().slice(0, 10) // YYYY-MM-DD\n  })\n  const [lifeExpectancy, setLifeExpectancy] = useState(LIFE_PLAN_DEFAULTS.lifeExpectancyYears)\n  const [netWorth, setNetWorth] = useState(LIFE_PLAN_DEFAULTS.baseNetWorth)\n  const [income, setIncome] = useState(LIFE_PLAN_DEFAULTS.baseMonthlyIncome)\n  const [expenses, setExpenses] = useState(LIFE_PLAN_DEFAULTS.baseMonthlyExpenses)\n  const [contribution, setContribution] = useState(LIFE_PLAN_DEFAULTS.monthlyContribution)\n  const [returnYearly, setReturnYearly] = useState(LIFE_PLAN_DEFAULTS.expectedReturnYearly)\n  const [inflationYearly, setInflationYearly] = useState(LIFE_PLAN_DEFAULTS.inflationYearly)\n  const [inflateIncome, setInflateIncome] = useState(LIFE_PLAN_DEFAULTS.inflateIncome)\n  const [inflateExpenses, setInflateExpenses] = useState(LIFE_PLAN_DEFAULTS.inflateExpenses)\n  const [retirementAge, setRetirementAge] = useState(LIFE_PLAN_DEFAULTS.retirementAge)\n  const [retirementMonthlyIncome, setRetirementMonthlyIncome] = useState(LIFE_PLAN_DEFAULTS.retirementMonthlyIncome)\n  const [inflateRetirementIncome, setInflateRetirementIncome] = useState(LIFE_PLAN_DEFAULTS.inflateRetirementIncome)\n  const [events, setEvents] = useState<LifeEvent[]>([])\n  const [showEventForm, setShowEventForm] = useState(false)\n  const [microPlans, setMicroPlans] = useState<{ id: string; effectiveDate: string; monthlyIncome: number; monthlyExpenses: number; monthlyContribution: number }[]>([])\n  const [showMicroPlanForm, setShowMicroPlanForm] = useState(false)\n  const [microPlanSaving, setMicroPlanSaving] = useState(false)\n\n  useEffect(() => {\n    async function init() {\n      const { data } = await supabase.auth.getUser()\n      if (!data.user) {\n        router.replace('/login')\n        return\n      }\n      setAuthUserId(data.user.id)\n      const saved = await getLifeData(data.user.id)\n      if (saved) {\n        setHasPlan(true)\n        setBirthDate(saved.birthDate.slice(0, 10)) // YYYY-MM-DD para input date\n        setLifeExpectancy(saved.lifeExpectancyYears)\n        setNetWorth(saved.settings.baseNetWorth)\n        setIncome(saved.settings.baseMonthlyIncome)\n        setExpenses(saved.settings.baseMonthlyExpenses)\n        setContribution(saved.settings.monthlyContribution)\n        setReturnYearly(saved.settings.expectedReturnYearly)\n        setInflationYearly(saved.settings.inflationYearly)\n        setInflateIncome(saved.settings.inflateIncome ?? true)\n        setInflateExpenses(saved.settings.inflateExpenses ?? true)\n        setRetirementAge(saved.settings.retirementAge ?? 65)\n        setRetirementMonthlyIncome(saved.settings.retirementMonthlyIncome ?? 0)\n        setInflateRetirementIncome(saved.settings.inflateRetirementIncome ?? true)\n        setScenarioId(saved.scenarioId)\n        setEvents(\n          saved.events.map(e => ({\n            id: e.id!,\n            type: e.type,\n            title: e.title,\n            date: new Date(e.date),\n            endDate: e.endDate ? new Date(e.endDate) : undefined,\n            amount: e.amount,\n            frequency: e.frequency,\n            durationMonths: e.durationMonths,\n            inflationIndexed: e.inflationIndexed ?? true,\n          }))\n        )\n        setMicroPlans(\n          saved.microPlans.map(m => ({\n            id: m.id,\n            effectiveDate: m.effectiveDate,\n            monthlyIncome: m.monthlyIncome,\n            monthlyExpenses: m.monthlyExpenses,\n            monthlyContribution: m.monthlyContribution,\n          }))\n        )\n      }\n      setLoading(false)\n    }\n    init()\n  }, [router])\n\n  async function handleSetupComplete(payload: Parameters<typeof saveLifeData>[1]) {\n    if (!authUserId) return\n    setSetupSaving(true)\n    try {\n      const result = await saveLifeData(authUserId, payload)\n      setScenarioId(result.scenarioId)\n      setHasPlan(true)\n      setBirthDate(payload.birthDate.slice(0, 10))\n      setLifeExpectancy(payload.lifeExpectancyYears)\n      setNetWorth(payload.baseNetWorth)\n      setIncome(payload.baseMonthlyIncome)\n      setExpenses(payload.baseMonthlyExpenses)\n      setContribution(payload.monthlyContribution)\n      setReturnYearly(payload.expectedReturnYearly)\n      setInflationYearly(payload.inflationYearly)\n      setInflateIncome(payload.inflateIncome ?? true)\n      setInflateExpenses(payload.inflateExpenses ?? true)\n      setRetirementAge(payload.retirementAge ?? 65)\n      setRetirementMonthlyIncome(payload.retirementMonthlyIncome ?? 0)\n      setInflateRetirementIncome(payload.inflateRetirementIncome ?? true)\n    } finally {\n      setSetupSaving(false)\n    }\n  }\n\n  const birthDateAsDate = useMemo(\n    () => new Date(birthDate + 'T12:00:00'),\n    [birthDate]\n  )\n\n  const microPlansForEngine: LifeMicroPlan[] = useMemo(\n    () =>\n      microPlans.map(m => ({\n        id: m.id,\n        effectiveDate: new Date(m.effectiveDate + 'T12:00:00'),\n        monthlyIncome: m.monthlyIncome,\n        monthlyExpenses: m.monthlyExpenses,\n        monthlyContribution: m.monthlyContribution,\n      })),\n    [microPlans]\n  )\n\n  const projection = useMemo(\n    () =>\n      buildLifeProjection({\n        profile: {\n          birthDate: birthDateAsDate,\n          lifeExpectancyYears: lifeExpectancy,\n        },\n        settings: {\n          baseNetWorth: netWorth,\n          baseMonthlyIncome: income,\n          baseMonthlyExpenses: expenses,\n          monthlyContribution: contribution,\n          expectedReturnYearly: returnYearly,\n          inflationYearly,\n          inflateIncome,\n          inflateExpenses,\n          retirementAge,\n          retirementMonthlyIncome,\n          inflateRetirementIncome,\n        },\n        events,\n        microPlans: microPlansForEngine,\n      }),\n    [\n      birthDateAsDate,\n      lifeExpectancy,\n      netWorth,\n      income,\n      expenses,\n      contribution,\n      returnYearly,\n      inflationYearly,\n      inflateIncome,\n      inflateExpenses,\n      retirementAge,\n      retirementMonthlyIncome,\n      inflateRetirementIncome,\n      events,\n      microPlansForEngine,\n    ]\n  )\n\n  async function handleSavePlan() {\n    if (!authUserId) return\n    setSaving(true)\n    try {\n      const result = await saveLifeData(authUserId, {\n        birthDate: new Date(birthDate + 'T12:00:00').toISOString(),\n        lifeExpectancyYears: lifeExpectancy,\n        baseNetWorth: netWorth,\n        baseMonthlyIncome: income,\n        baseMonthlyExpenses: expenses,\n        monthlyContribution: contribution,\n        expectedReturnYearly: returnYearly,\n        inflationYearly,\n        inflateIncome,\n        inflateExpenses,\n        retirementAge,\n        retirementMonthlyIncome,\n        inflateRetirementIncome,\n      })\n      setScenarioId(result.scenarioId)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  async function handleAddEvent(payload: {\n    type: LifeEventType\n    title: string\n    date: string\n    endDate?: string\n    amount: number\n    frequency: 'once' | 'monthly' | 'yearly'\n    durationMonths?: number\n    inflationIndexed: boolean\n  }) {\n    if (!authUserId) return\n    let sid = scenarioId\n    if (!sid) {\n      const result = await saveLifeData(authUserId, {\n        birthDate: new Date(birthDate + 'T12:00:00').toISOString(),\n        lifeExpectancyYears: lifeExpectancy,\n        baseNetWorth: netWorth,\n        baseMonthlyIncome: income,\n        baseMonthlyExpenses: expenses,\n        monthlyContribution: contribution,\n        expectedReturnYearly: returnYearly,\n        inflationYearly,\n        inflateIncome,\n        inflateExpenses,\n        retirementAge,\n        retirementMonthlyIncome,\n        inflateRetirementIncome,\n      })\n      sid = result.scenarioId\n      setScenarioId(sid)\n    }\n    setEventSaving(true)\n    try {\n      const { id } = await saveLifeEvent(authUserId, sid, payload)\n      setEvents(prev => [\n        ...prev,\n        {\n          id,\n          type: payload.type,\n          title: payload.title,\n          date: new Date(payload.date),\n          endDate: payload.endDate ? new Date(payload.endDate) : undefined,\n          amount: payload.amount,\n          frequency: payload.frequency,\n          durationMonths: payload.durationMonths,\n          inflationIndexed: payload.inflationIndexed,\n        },\n      ])\n      setShowEventForm(false)\n    } finally {\n      setEventSaving(false)\n    }\n  }\n\n  async function handleDeleteEvent(id: string) {\n    if (!authUserId) return\n    await deleteLifeEvent(authUserId, id)\n    setEvents(prev => prev.filter(e => e.id !== id))\n  }\n\n  async function handleAddMicroPlan(payload: {\n    effectiveDate: string\n    monthlyIncome: number\n    monthlyExpenses: number\n    monthlyContribution: number\n  }) {\n    if (!authUserId || !scenarioId) return\n    setMicroPlanSaving(true)\n    try {\n      const { id } = await saveLifeMicroPlan(authUserId, scenarioId, payload)\n      setMicroPlans(prev => [\n        ...prev,\n        {\n          id,\n          effectiveDate: payload.effectiveDate,\n          monthlyIncome: payload.monthlyIncome,\n          monthlyExpenses: payload.monthlyExpenses,\n          monthlyContribution: payload.monthlyContribution,\n        },\n      ])\n      setShowMicroPlanForm(false)\n    } finally {\n      setMicroPlanSaving(false)\n    }\n  }\n\n  async function handleDeleteMicroPlan(id: string) {\n    if (!authUserId) return\n    await deleteLifeMicroPlan(authUserId, id)\n    setMicroPlans(prev => prev.filter(m => m.id !== id))\n  }\n\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center bg-background text-muted-foreground\">\n        Carregando seu planejamento...\n      </div>\n    )\n  }\n\n  if (!hasPlan) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"px-4 pt-8 text-center\">\n          <h1 className=\"text-2xl font-semibold text-foreground\">\n            Seu plano de vida\n          </h1>\n          <p className=\"mt-2 text-sm text-muted-foreground\">\n            Responda algumas perguntas para criarmos seu cenário inicial.\n          </p>\n        </div>\n        <SetupWizard\n          onComplete={handleSetupComplete}\n          isLoading={setupSaving}\n        />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background px-4 py-8\">\n      <div className=\"mx-auto flex max-w-4xl flex-col gap-8\">\n        <header className=\"flex flex-wrap items-center justify-between gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-semibold tracking-tight text-foreground\">\n              Seu plano de vida\n            </h1>\n            <p className=\"mt-1 text-sm text-muted-foreground\">\n              Ajuste parâmetros e eventos para ver a projeção patrimonial.\n            </p>\n          </div>\n          <Button onClick={handleSavePlan} disabled={saving} size=\"sm\">\n            {saving ? 'Salvando...' : 'Salvar plano'}\n          </Button>\n        </header>\n\n        {projection.firstMonthWithZeroOrNegativeNetWorth !== null && (() => {\n          const point = projection.monthly[projection.firstMonthWithZeroOrNegativeNetWorth]\n          const dateLabel = point\n            ? point.date.toLocaleDateString('pt-BR', { month: 'long', year: 'numeric' })\n            : ''\n          return (\n            <div\n              role=\"alert\"\n              className=\"rounded-lg border border-destructive/50 bg-destructive/10 px-4 py-3 text-sm text-destructive\"\n            >\n              <p className=\"font-medium\">Atenção: patrimônio zera ou fica negativo</p>\n              <p className=\"mt-1 text-muted-foreground\">\n                Na projeção, o patrimônio atinge zero ou valor negativo{dateLabel ? ` em ${dateLabel}` : ''}. Ajuste renda, gastos, aportes ou eventos para evitar esse cenário.\n              </p>\n            </div>\n          )\n        })()}\n\n        <div className=\"grid gap-6 md:grid-cols-2\">\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-base\">Você hoje</CardTitle>\n              <CardDescription>Dados atuais para a projeção</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"birthDate\" className=\"text-muted-foreground\">Data de nascimento</Label>\n                  <Input\n                    id=\"birthDate\"\n                    type=\"date\"\n                    value={birthDate}\n                    onChange={e => setBirthDate(e.target.value)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"lifeExp\" className=\"text-muted-foreground\">Expectativa de vida</Label>\n                  <Input\n                    id=\"lifeExp\"\n                    type=\"number\"\n                    min={60}\n                    max={110}\n                    value={lifeExpectancy}\n                    onChange={e => setLifeExpectancy(Number(e.target.value) || 0)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"netWorth\" className=\"text-muted-foreground\">Patrimônio atual (R$)</Label>\n                  <Input\n                    id=\"netWorth\"\n                    type=\"number\"\n                    value={netWorth}\n                    onChange={e => setNetWorth(Number(e.target.value) || 0)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"income\" className=\"text-muted-foreground\">Renda mensal (R$)</Label>\n                  <Input\n                    id=\"income\"\n                    type=\"number\"\n                    value={income}\n                    onChange={e => setIncome(Number(e.target.value) || 0)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"expenses\" className=\"text-muted-foreground\">Gastos mensais (R$)</Label>\n                  <Input\n                    id=\"expenses\"\n                    type=\"number\"\n                    value={expenses}\n                    onChange={e => setExpenses(Number(e.target.value) || 0)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"contribution\" className=\"text-muted-foreground\">Aporte mensal (R$)</Label>\n                  <Input\n                    id=\"contribution\"\n                    type=\"number\"\n                    value={contribution}\n                    onChange={e => setContribution(Number(e.target.value) || 0)}\n                  />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-base\">Premissas</CardTitle>\n              <CardDescription>Retorno e inflação para a projeção</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"returnYearly\" className=\"text-muted-foreground\">Retorno anual (%)</Label>\n                  <Input\n                    id=\"returnYearly\"\n                    type=\"number\"\n                    value={returnYearly}\n                    onChange={e => setReturnYearly(Number(e.target.value) || 0)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"inflationYearly\" className=\"text-muted-foreground\">Inflação anual (%)</Label>\n                  <Input\n                    id=\"inflationYearly\"\n                    type=\"number\"\n                    value={inflationYearly}\n                    onChange={e => setInflationYearly(Number(e.target.value) || 0)}\n                  />\n                </div>\n              </div>\n              <div className=\"space-y-3 rounded-lg border border-border/50 bg-muted/20 p-3\">\n                <p className=\"text-xs font-medium text-muted-foreground\">Inflacionar na projeção</p>\n                <div className=\"flex flex-wrap gap-4\">\n                  <label className=\"flex items-center gap-2 text-sm\">\n                    <input\n                      type=\"checkbox\"\n                      checked={inflateIncome}\n                      onChange={e => setInflateIncome(e.target.checked)}\n                      className=\"h-4 w-4 rounded border-input\"\n                    />\n                    <span className=\"text-foreground\">Renda (antes da aposentadoria)</span>\n                  </label>\n                  <label className=\"flex items-center gap-2 text-sm\">\n                    <input\n                      type=\"checkbox\"\n                      checked={inflateExpenses}\n                      onChange={e => setInflateExpenses(e.target.checked)}\n                      className=\"h-4 w-4 rounded border-input\"\n                    />\n                    <span className=\"text-foreground\">Gastos</span>\n                  </label>\n                </div>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Refine com eventos de vida abaixo (emprego, filhos, grandes compras, etc.).\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"md:col-span-2 border-primary/20 bg-primary/5\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-base flex items-center gap-2\">\n                <span className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/15 text-primary\" aria-hidden>\n                  🏖\n                </span>\n                Aposentadoria\n              </CardTitle>\n              <CardDescription>\n                A partir desta idade a projeção usa a renda de aposentadoria no lugar da renda atual.\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid gap-4 sm:grid-cols-2\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"retirementAge\" className=\"text-muted-foreground\">Idade de aposentadoria</Label>\n                  <Input\n                    id=\"retirementAge\"\n                    type=\"number\"\n                    min={40}\n                    max={90}\n                    value={retirementAge}\n                    onChange={e => setRetirementAge(Number(e.target.value) || 65)}\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"retirementMonthlyIncome\" className=\"text-muted-foreground\">Renda mensal (R$)</Label>\n                  <Input\n                    id=\"retirementMonthlyIncome\"\n                    type=\"number\"\n                    min={0}\n                    value={retirementMonthlyIncome}\n                    onChange={e => setRetirementMonthlyIncome(Number(e.target.value) || 0)}\n                    placeholder=\"Ex: 8000\"\n                  />\n                </div>\n              </div>\n              <label className=\"flex items-center gap-2 text-sm\">\n                <input\n                  type=\"checkbox\"\n                  checked={inflateRetirementIncome}\n                  onChange={e => setInflateRetirementIncome(e.target.checked)}\n                  className=\"h-4 w-4 rounded border-input\"\n                />\n                <span className=\"text-foreground\">Inflacionar renda de aposentadoria na projeção</span>\n              </label>\n            </CardContent>\n          </Card>\n        </div>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-base\">Micro planos</CardTitle>\n              <CardDescription>\n                A partir de uma data, use outra renda, gastos e aporte (sem usar eventos)\n              </CardDescription>\n            </div>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowMicroPlanForm(p => !p)}\n              disabled={!scenarioId}\n            >\n              {showMicroPlanForm ? 'Ocultar' : '+ Adicionar micro plano'}\n            </Button>\n          </CardHeader>\n          <CardContent>\n            {showMicroPlanForm && (\n              <div className=\"mb-4\">\n                <LifeMicroPlanForm\n                  onSubmit={handleAddMicroPlan}\n                  onCancel={() => setShowMicroPlanForm(false)}\n                />\n              </div>\n            )}\n            <LifeMicroPlansList microPlans={microPlans} onDelete={handleDeleteMicroPlan} />\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <div>\n              <CardTitle className=\"text-base\">Eventos de vida</CardTitle>\n              <CardDescription>Mudanças de renda, gastos e marcos</CardDescription>\n            </div>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowEventForm(p => !p)}\n            >\n              {showEventForm ? 'Ocultar' : '+ Adicionar evento'}\n            </Button>\n          </CardHeader>\n          <CardContent>\n            {showEventForm && (\n              <div className=\"mb-4\">\n                <LifeEventForm\n                  onSubmit={handleAddEvent}\n                  onCancel={() => setShowEventForm(false)}\n                />\n              </div>\n            )}\n            <LifeEventsList events={events} onDelete={handleDeleteEvent} />\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base\">Projeção patrimonial</CardTitle>\n            <CardDescription>Evolução ao longo dos anos</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <LifeTimelineChart data={projection.monthly} />\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-base\">Tabela anual</CardTitle>\n            <CardDescription>Resumo por ano</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <LifeProjectionTable data={projection.yearly.slice(0, 40)} />\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}